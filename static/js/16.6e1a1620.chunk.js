(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[16],{1178:function(t,e,a){"use strict";a.r(e);a(200);var s=a(216),n=(a(201),a(238)),i=(a(241),a(311)),o=(a(202),a(235)),l=(a(154),a(164)),r=a(13),d=a(14),c=a(27),h=a(17),u=a(16),m=(a(239),a(237)),p=a(0),_=a.n(p),f=a(242),g=a.n(f),v=(a(243),a(849),a(203)),b=a(214),w=a.n(b),S=a(18),E=[],y=m.a.Option,C=function(t){Object(h.a)(a,t);var e=Object(u.a)(a);function a(){var t;return Object(r.a)(this,a),(t=e.call(this)).state={area_message:"Please wait for data to load",cum_or_inc:"Cumulative",data_loading:!0,areas:"US",width:0,height:0,arealist:[],case_data:[],death_data:[],death_list:[],case_preds:[],case_pred_list:[],death_preds:[],death_pred_list:[],CoD:"case",case_data_plot:[],death_data_plot:[],case_preds_plot:[],death_preds_plot:[],data_date:[],pred_date:[],to_plot:[]},t.updateWindowDimensions=t.updateWindowDimensions.bind(Object(c.a)(t)),t.plotData=t.plotData.bind(Object(c.a)(t)),t.onValuesChange=t.onValuesChange.bind(Object(c.a)(t)),t.doneLoading=t.doneLoading.bind(Object(c.a)(t)),t.addNewArea=t.addNewArea.bind(Object(c.a)(t)),t}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions),S.a.initialize("UA-186385643-1"),S.a.pageview("/ReCOVER/RoW"),this.setState({arealist:E})}},{key:"componentWillMount",value:function(){g.a.parse("https://raw.githubusercontent.com/scc-usc/ReCOVER-COVID-19/master/results/forecasts/global_data.csv",{download:!0,worker:!0,complete:function(t){var e,a=this;for(e=1;e<t.data.length;e++)t.data[e].length>2&&(E[e-1]=t.data[e][1]);this.setState({data_date:t.data[0].slice(2).map((function(t){return t.concat("T23:00:00Z")}))}),this.setState({arealist:E}),this.setState({case_data:t.data},(function(){a.doneLoading()}))}.bind(this)}),g.a.parse("https://raw.githubusercontent.com/scc-usc/ReCOVER-COVID-19/master/results/forecasts/global_deaths.csv",{download:!0,worker:!0,complete:function(t){var e,a=this,s=[];for(e=1;e<t.data.length;e++)t.data[e].length>2&&(s[e-1]=t.data[e][1]);this.setState({death_list:s}),this.setState({death_data:t.data},(function(){a.doneLoading()}))}.bind(this)}),g.a.parse("https://raw.githubusercontent.com/scc-usc/ReCOVER-COVID-19/master/results/forecasts/global_forecasts_current_0.csv",{download:!0,worker:!0,complete:function(t){var e,a=this,s=[];for(e=1;e<t.data.length;e++)t.data[e].length>2&&(s[e-1]=t.data[e][1]);this.setState({pred_date:t.data[0].slice(2).map((function(t){return t.concat("T23:00:00Z")}))}),this.setState({case_pred_list:s}),this.setState({case_preds:t.data},(function(){a.doneLoading()}))}.bind(this)}),g.a.parse("https://raw.githubusercontent.com/scc-usc/ReCOVER-COVID-19/master/results/forecasts/global_deaths_current_0.csv",{download:!0,worker:!0,complete:function(t){var e,a=this,s=[];for(e=1;e<t.data.length;e++)t.data[e].length>2&&(s[e-1]=t.data[e][1]);this.setState({death_pred_list:s}),this.setState({death_preds:t.data},(function(){a.doneLoading()}))}.bind(this)})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"plotData",value:function(){var t,e,a,s=[];if("case"===this.state.CoD?(t=this.state.case_data_plot,e=this.state.case_preds_plot):(t=this.state.death_data_plot,e=this.state.death_preds_plot),"Cumulative"===this.state.cum_or_inc){for(a=0;a<t.length;a++)t[a]>0&&this.state.data_date[a]&&s.push({x:this.state.data_date[a],y:t[a]});var n=[];for(a=0;a<e.length;a++)this.state.pred_date[a]&&n.push({x:this.state.pred_date[a],y:e[a]})}else{var i=t[0],o=0;for(a=1;a<t.length;a++)(o=t[a]-i)>=0&&i>0&&this.state.data_date[a]&&s.push({x:this.state.data_date[a],y:o}),i=t[a];n=[];for(i=t[t.length-1],a=0;a<e.length;a++)(o=e[a]-i)>=0&&i>0&&this.state.pred_date[a]&&n.push({x:this.state.pred_date[a],y:o}),i=e[a]}var l=[{id:"Data",data:s},{id:"Forecasts",data:n}];this.setState({to_plot:l})}},{key:"addNewArea",value:function(t){var e=this,a=this.state.arealist.indexOf(t),s=[];a>-1&&(s=this.state.case_data[a+1].slice(2)),this.setState({case_data_plot:s}),s=[],(a=this.state.case_pred_list.indexOf(t))>-1&&(s=this.state.case_preds[a+1].slice(2)),this.setState({case_preds_plot:s});var n=[];(a=this.state.death_list.indexOf(t))>-1&&(n=this.state.death_data[a+1].slice(2)),this.setState({death_data_plot:n}),n=[],(a=this.state.death_pred_list.indexOf(t))>-1&&(n=this.state.death_preds[a+1].slice(2)),this.setState({death_preds_plot:n},(function(){e.plotData()}))}},{key:"onValuesChange",value:function(t,e){var a=this;"areas"in t&&this.addNewArea(e.areas),"cum_or_inc"in t&&this.setState({cum_or_inc:e.cum_or_inc},(function(){return a.plotData()})),this.setState({CoD:e.CoD},(function(){return a.plotData()}))}},{key:"doneLoading",value:function(){var t=this;this.state.data_loading&this.state.case_preds.length>0&&this.state.death_preds.length>0&&this.state.death_data.length>0&&this.state.case_data.length>0&&(this.setState({data_loading:!1}),this.setState({area_message:"Start typing a location name to see its data and forecasts"}),this.setState({areas:"US"},(function(){t.addNewArea(t.state.areas)})))}},{key:"render",value:function(){var t=this.state,e=t.areas,a=t.arealist,r=t.CoD,d=t.to_plot,c=(t.data_loading,t.cum_or_inc),h=t.area_message,u=a.length>0&&a.map((function(t){return _.a.createElement(y,{key:t,value:t},t)}),this),p=1+this.state.width/280;return _.a.createElement("div",{style:{color:"#1f1c1c"}},_.a.createElement("div",{className:"grid"},_.a.createElement("div",{className:"introduction"},_.a.createElement(l.a,null,_.a.createElement("h1",null,"COVID19 Forecasts for Countries around the World")),_.a.createElement("div",{style:{background:"#fae3a2"}},_.a.createElement(l.a,null,_.a.createElement("p",null,"Note: These forecasts are generated through automated scripts and not analyzed or fixed manually.")),_.a.createElement(l.a,null,_.a.createElement("p",null,"Note: Unreliable forecasts expected due to uncertain case reporting.")))),_.a.createElement(l.a,null,_.a.createElement("div",{className:"form-column-row"},_.a.createElement(o.a,{ref:this.formRef,onValuesChange:this.onValuesChange,initialValues:{areas:e,CoD:r,cum_or_inc:c}},_.a.createElement(i.a,{content:h,placement:"top"},_.a.createElement(o.a.Item,{style:{marginBottom:"0px"},label:"Location",name:"areas",rules:[{required:!0,message:"Please select areas!"}]},_.a.createElement(m.a,{showSearch:!0,loading:this.state.data_loading,style:{width:"100%"},placeholder:"Select Areas"},u))),_.a.createElement(l.a,null,_.a.createElement(s.a,null,_.a.createElement(i.a,{content:"Choose to plot cumulative or new weekly numbers",placement:"bottomLeft"},_.a.createElement(o.a.Item,{label:"Data Type",style:{marginBottom:"5px"},name:"cum_or_inc",value:c},_.a.createElement(n.a.Group,{initialValue:"Cumulative",buttonStyle:"solid"},_.a.createElement(n.a.Button,{value:"Cumulative"},"Cumulative"),_.a.createElement(n.a.Button,{value:"New"},"Weekly New"))))),_.a.createElement(s.a,null,_.a.createElement(i.a,{content:"Choose cases or deaths to plot",placement:"bottomLeft"},_.a.createElement(o.a.Item,{label:"",style:{marginBottom:"5px"},name:"CoD",value:r},_.a.createElement(n.a.Group,{initialValue:"case",buttonStyle:"solid"},_.a.createElement(n.a.Button,{value:"case"},"Cases"),_.a.createElement(n.a.Button,{value:"death"},"Deaths"))))))))),_.a.createElement(l.a,null,_.a.createElement("div",{className:"graph-row"},_.a.createElement(v.a,{data:d,margin:{top:50,right:10,bottom:100,left:60},xScale:{type:"time",format:"%Y-%m-%dT%H:%M:%SZ"},xFormat:"time:%Y-%m-%d",yScale:{type:"linear",min:"auto",max:"auto",stacked:!1,reverse:!1},axisTop:null,axisRight:null,axisLeft:{format:function(t){return w()(t).format("0.[0]a")},orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:c.concat(" ".concat(r.concat("s"))),legendOffset:-55,legendPosition:"middle"},axisBottom:{format:"%b %d",tickValues:p,legend:"date",legendOffset:36,legendPosition:"middle"},colors:{scheme:"nivo"},pointSize:10,pointColor:{theme:"background"},pointBorderWidth:2,pointBorderColor:{from:"serieColor"},pointLabel:"y",pointLabelYOffset:-12,useMesh:!0,legends:[{text:{fontSize:14},anchor:"top-left",direction:"column",justify:!1,translateX:30,translateY:0,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}],theme:{axis:{ticks:{text:{fontSize:16}},legend:{text:{fontSize:16}}},legends:{text:{fontSize:16}}}})))))}}]),a}(p.Component);e.default=C},849:function(t,e,a){}}]);
//# sourceMappingURL=16.6e1a1620.chunk.js.map