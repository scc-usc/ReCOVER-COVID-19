{"ast":null,"code":"import React, { memo, useMemo, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Motion, spring, TransitionMotion } from 'react-motion';\nimport { textPropsByEngine, useTheme, useMotionConfig } from '@nivo/core';\nimport isNumber from 'lodash/isNumber';\nimport { timeMillisecond, utcMillisecond, timeSecond, utcSecond, timeMinute, utcMinute, timeHour, utcHour, timeDay, utcDay, timeWeek, utcWeek, timeSunday, utcSunday, timeMonday, utcMonday, timeTuesday, utcTuesday, timeWednesday, utcWednesday, timeThursday, utcThursday, timeFriday, utcFriday, timeSaturday, utcSaturday, timeMonth, utcMonth, timeYear, utcYear } from 'd3-time';\nimport { timeFormat } from 'd3-time-format';\nimport { format } from 'd3-format';\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(Object(source));\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar centerScale = function centerScale(scale) {\n  var bandwidth = scale.bandwidth();\n  if (bandwidth === 0) return scale;\n  var offset = bandwidth / 2;\n\n  if (scale.round()) {\n    offset = Math.round(offset);\n  }\n\n  return function (d) {\n    return scale(d) + offset;\n  };\n};\n\nvar timeByType = {\n  millisecond: [timeMillisecond, utcMillisecond],\n  second: [timeSecond, utcSecond],\n  minute: [timeMinute, utcMinute],\n  hour: [timeHour, utcHour],\n  day: [timeDay, utcDay],\n  week: [timeWeek, utcWeek],\n  sunday: [timeSunday, utcSunday],\n  monday: [timeMonday, utcMonday],\n  tuesday: [timeTuesday, utcTuesday],\n  wednesday: [timeWednesday, utcWednesday],\n  thursday: [timeThursday, utcThursday],\n  friday: [timeFriday, utcFriday],\n  saturday: [timeSaturday, utcSaturday],\n  month: [timeMonth, utcMonth],\n  year: [timeYear, utcYear]\n};\nvar timeTypes = Object.keys(timeByType);\nvar timeIntervalRegexp = new RegExp(\"^every\\\\s*(\\\\d+)?\\\\s*(\".concat(timeTypes.join('|'), \")s?$\"), 'i');\n\nvar getScaleTicks = function getScaleTicks(scale, spec) {\n  if (Array.isArray(spec)) {\n    return spec;\n  }\n\n  if (scale.ticks) {\n    if (spec === undefined) {\n      return scale.ticks();\n    }\n\n    if (isNumber(spec)) {\n      return scale.ticks(spec);\n    }\n\n    if (typeof spec === 'string') {\n      var matches = spec.match(timeIntervalRegexp);\n\n      if (matches) {\n        var timeType = timeByType[matches[2]][scale.useUTC ? 1 : 0];\n\n        if (matches[1] === undefined) {\n          return scale.ticks(timeType);\n        }\n\n        return scale.ticks(timeType.every(Number(matches[1])));\n      }\n\n      throw new Error(\"Invalid tickValues: \".concat(spec));\n    }\n  }\n\n  return scale.domain();\n};\n\nvar computeCartesianTicks = function computeCartesianTicks(_ref) {\n  var axis = _ref.axis,\n      scale = _ref.scale,\n      ticksPosition = _ref.ticksPosition,\n      tickValues = _ref.tickValues,\n      tickSize = _ref.tickSize,\n      tickPadding = _ref.tickPadding,\n      tickRotation = _ref.tickRotation,\n      _ref$engine = _ref.engine,\n      engine = _ref$engine === void 0 ? 'svg' : _ref$engine;\n  var values = getScaleTicks(scale, tickValues);\n  var textProps = textPropsByEngine[engine];\n  var position = scale.bandwidth ? centerScale(scale) : scale;\n  var line = {\n    lineX: 0,\n    lineY: 0\n  };\n  var text = {\n    textX: 0,\n    textY: 0\n  };\n  var translate;\n  var textAlign = textProps.align.center;\n  var textBaseline = textProps.baseline.center;\n\n  if (axis === 'x') {\n    translate = function translate(d) {\n      return {\n        x: position(d),\n        y: 0\n      };\n    };\n\n    line.lineY = tickSize * (ticksPosition === 'after' ? 1 : -1);\n    text.textY = (tickSize + tickPadding) * (ticksPosition === 'after' ? 1 : -1);\n\n    if (ticksPosition === 'after') {\n      textBaseline = textProps.baseline.top;\n    } else {\n      textBaseline = textProps.baseline.bottom;\n    }\n\n    if (tickRotation === 0) {\n      textAlign = textProps.align.center;\n    } else if (ticksPosition === 'after' && tickRotation < 0 || ticksPosition === 'before' && tickRotation > 0) {\n      textAlign = textProps.align.right;\n      textBaseline = textProps.baseline.center;\n    } else if (ticksPosition === 'after' && tickRotation > 0 || ticksPosition === 'before' && tickRotation < 0) {\n      textAlign = textProps.align.left;\n      textBaseline = textProps.baseline.center;\n    }\n  } else {\n    translate = function translate(d) {\n      return {\n        x: 0,\n        y: position(d)\n      };\n    };\n\n    line.lineX = tickSize * (ticksPosition === 'after' ? 1 : -1);\n    text.textX = (tickSize + tickPadding) * (ticksPosition === 'after' ? 1 : -1);\n\n    if (ticksPosition === 'after') {\n      textAlign = textProps.align.left;\n    } else {\n      textAlign = textProps.align.right;\n    }\n  }\n\n  var ticks = values.map(function (value) {\n    return _objectSpread({\n      key: value,\n      value: value\n    }, translate(value), line, text);\n  });\n  return {\n    ticks: ticks,\n    textAlign: textAlign,\n    textBaseline: textBaseline\n  };\n};\n\nvar getFormatter = function getFormatter(format$1, scale) {\n  if (!format$1 || typeof format$1 === 'function') return format$1;\n\n  if (scale.type === 'time') {\n    var f = timeFormat(format$1);\n    return function (d) {\n      return f(new Date(d));\n    };\n  }\n\n  return format(format$1);\n};\n\nvar computeGridLines = function computeGridLines(_ref2) {\n  var width = _ref2.width,\n      height = _ref2.height,\n      scale = _ref2.scale,\n      axis = _ref2.axis,\n      _values = _ref2.values;\n  var lineValues = Array.isArray(_values) ? _values : undefined;\n  var lineCount = isNumber(_values) ? _values : undefined;\n  var values = lineValues || getScaleTicks(scale, lineCount);\n  var position = scale.bandwidth ? centerScale(scale) : scale;\n  var lines;\n\n  if (axis === 'x') {\n    lines = values.map(function (v) {\n      return {\n        key: \"\".concat(v),\n        x1: position(v),\n        x2: position(v),\n        y1: 0,\n        y2: height\n      };\n    });\n  } else if (axis === 'y') {\n    lines = values.map(function (v) {\n      return {\n        key: \"\".concat(v),\n        x1: 0,\n        x2: width,\n        y1: position(v),\n        y2: position(v)\n      };\n    });\n  }\n\n  return lines;\n};\n\nvar axisPropTypes = {\n  ticksPosition: PropTypes.oneOf(['before', 'after']),\n  tickValues: PropTypes.oneOfType([PropTypes.number, PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.instanceOf(Date)])), PropTypes.string]),\n  tickSize: PropTypes.number,\n  tickPadding: PropTypes.number,\n  tickRotation: PropTypes.number,\n  format: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  renderTick: PropTypes.func,\n  legend: PropTypes.node,\n  legendPosition: PropTypes.oneOf(['start', 'middle', 'end']),\n  legendOffset: PropTypes.number\n};\nvar axisPropType = PropTypes.shape(axisPropTypes);\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar AxisTick = function AxisTick(_ref) {\n  var _value = _ref.value,\n      x = _ref.x,\n      y = _ref.y,\n      opacity = _ref.opacity,\n      rotate = _ref.rotate,\n      format = _ref.format,\n      lineX = _ref.lineX,\n      lineY = _ref.lineY,\n      _onClick = _ref.onClick,\n      textX = _ref.textX,\n      textY = _ref.textY,\n      textBaseline = _ref.textBaseline,\n      textAnchor = _ref.textAnchor;\n  var theme = useTheme();\n  var value = _value;\n\n  if (format !== undefined) {\n    value = format(value);\n  }\n\n  var gStyle = {\n    opacity: opacity\n  };\n\n  if (_onClick) {\n    gStyle['cursor'] = 'pointer';\n  }\n\n  return React.createElement(\"g\", _extends({\n    transform: \"translate(\".concat(x, \",\").concat(y, \")\")\n  }, _onClick ? {\n    onClick: function onClick(e) {\n      return _onClick(e, value);\n    }\n  } : {}, {\n    style: gStyle\n  }), React.createElement(\"line\", {\n    x1: 0,\n    x2: lineX,\n    y1: 0,\n    y2: lineY,\n    style: theme.axis.ticks.line\n  }), React.createElement(\"text\", {\n    dominantBaseline: textBaseline,\n    textAnchor: textAnchor,\n    transform: \"translate(\".concat(textX, \",\").concat(textY, \") rotate(\").concat(rotate, \")\"),\n    style: theme.axis.ticks.text\n  }, value));\n};\n\nAxisTick.propTypes = {\n  value: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.instanceOf(Date)]).isRequired,\n  format: PropTypes.func,\n  x: PropTypes.number.isRequired,\n  y: PropTypes.number.isRequired,\n  lineX: PropTypes.number.isRequired,\n  lineY: PropTypes.number.isRequired,\n  textX: PropTypes.number.isRequired,\n  textY: PropTypes.number.isRequired,\n  textBaseline: PropTypes.string.isRequired,\n  textAnchor: PropTypes.string.isRequired,\n  opacity: PropTypes.number.isRequired,\n  rotate: PropTypes.number.isRequired,\n  onClick: PropTypes.func\n};\nAxisTick.defaultProps = {\n  opacity: 1,\n  rotate: 0\n};\nvar AxisTick$1 = memo(AxisTick);\n\nfunction _extends$1() {\n  _extends$1 = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends$1.apply(this, arguments);\n}\n\nfunction _objectSpread$1(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(Object(source));\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty$1(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty$1(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar willEnter = function willEnter() {\n  return {\n    rotate: 0,\n    opacity: 0,\n    x: 0,\n    y: 0\n  };\n};\n\nvar willLeave = function willLeave(springConfig) {\n  return function (_ref) {\n    var _ref$style = _ref.style,\n        x = _ref$style.x,\n        y = _ref$style.y,\n        rotate = _ref$style.rotate;\n    return {\n      rotate: rotate,\n      opacity: spring(0, springConfig),\n      x: spring(x.val, springConfig),\n      y: spring(y.val, springConfig)\n    };\n  };\n};\n\nvar defaultTickRenderer = function defaultTickRenderer(props) {\n  return React.createElement(AxisTick$1, props);\n};\n\nvar Axis = function Axis(_ref2) {\n  var axis = _ref2.axis,\n      scale = _ref2.scale,\n      x = _ref2.x,\n      y = _ref2.y,\n      length = _ref2.length,\n      ticksPosition = _ref2.ticksPosition,\n      tickValues = _ref2.tickValues,\n      tickSize = _ref2.tickSize,\n      tickPadding = _ref2.tickPadding,\n      tickRotation = _ref2.tickRotation,\n      format = _ref2.format,\n      renderTick = _ref2.renderTick,\n      legend = _ref2.legend,\n      legendPosition = _ref2.legendPosition,\n      legendOffset = _ref2.legendOffset,\n      onClick = _ref2.onClick;\n  var theme = useTheme();\n\n  var _useMotionConfig = useMotionConfig(),\n      animate = _useMotionConfig.animate,\n      springConfig = _useMotionConfig.springConfig;\n\n  var formatValue = useMemo(function () {\n    return getFormatter(format, scale);\n  }, [format, scale]);\n\n  var _computeCartesianTick = computeCartesianTicks({\n    axis: axis,\n    scale: scale,\n    ticksPosition: ticksPosition,\n    tickValues: tickValues,\n    tickSize: tickSize,\n    tickPadding: tickPadding,\n    tickRotation: tickRotation\n  }),\n      ticks = _computeCartesianTick.ticks,\n      textAlign = _computeCartesianTick.textAlign,\n      textBaseline = _computeCartesianTick.textBaseline;\n\n  var legendNode = null;\n\n  if (legend !== undefined) {\n    var legendX = 0;\n    var legendY = 0;\n    var legendRotation = 0;\n    var textAnchor;\n\n    if (axis === 'y') {\n      legendRotation = -90;\n      legendX = legendOffset;\n\n      if (legendPosition === 'start') {\n        textAnchor = 'start';\n        legendY = length;\n      } else if (legendPosition === 'middle') {\n        textAnchor = 'middle';\n        legendY = length / 2;\n      } else if (legendPosition === 'end') {\n        textAnchor = 'end';\n      }\n    } else {\n      legendY = legendOffset;\n\n      if (legendPosition === 'start') {\n        textAnchor = 'start';\n      } else if (legendPosition === 'middle') {\n        textAnchor = 'middle';\n        legendX = length / 2;\n      } else if (legendPosition === 'end') {\n        textAnchor = 'end';\n        legendX = length;\n      }\n    }\n\n    legendNode = React.createElement(\"text\", {\n      transform: \"translate(\".concat(legendX, \", \").concat(legendY, \") rotate(\").concat(legendRotation, \")\"),\n      textAnchor: textAnchor,\n      style: _objectSpread$1({\n        dominantBaseline: 'central'\n      }, theme.axis.legend.text)\n    }, legend);\n  }\n\n  if (animate !== true) {\n    return React.createElement(\"g\", {\n      transform: \"translate(\".concat(x, \",\").concat(y, \")\")\n    }, ticks.map(function (tick, tickIndex) {\n      return React.createElement(renderTick, _objectSpread$1({\n        tickIndex: tickIndex,\n        format: formatValue,\n        rotate: tickRotation,\n        textBaseline: textBaseline,\n        textAnchor: textAlign\n      }, tick, onClick ? {\n        onClick: onClick\n      } : {}));\n    }), React.createElement(\"line\", {\n      style: theme.axis.domain.line,\n      x1: 0,\n      x2: axis === 'x' ? length : 0,\n      y1: 0,\n      y2: axis === 'x' ? 0 : length\n    }), legendNode);\n  }\n\n  return React.createElement(Motion, {\n    style: {\n      x: spring(x, springConfig),\n      y: spring(y, springConfig)\n    }\n  }, function (xy) {\n    return React.createElement(\"g\", {\n      transform: \"translate(\".concat(xy.x, \",\").concat(xy.y, \")\")\n    }, React.createElement(TransitionMotion, {\n      willEnter: willEnter,\n      willLeave: willLeave(springConfig),\n      styles: ticks.map(function (tick) {\n        return {\n          key: \"\".concat(tick.key),\n          data: tick,\n          style: {\n            opacity: spring(1, springConfig),\n            x: spring(tick.x, springConfig),\n            y: spring(tick.y, springConfig),\n            rotate: spring(tickRotation, springConfig)\n          }\n        };\n      })\n    }, function (interpolatedStyles) {\n      return React.createElement(Fragment, null, interpolatedStyles.map(function (_ref3, tickIndex) {\n        var style = _ref3.style,\n            tick = _ref3.data;\n        return React.createElement(renderTick, _objectSpread$1({\n          tickIndex: tickIndex,\n          format: formatValue,\n          textBaseline: textBaseline,\n          textAnchor: textAlign\n        }, tick, style, onClick ? {\n          onClick: onClick\n        } : {}));\n      }));\n    }), React.createElement(Motion, {\n      style: {\n        x2: spring(axis === 'x' ? length : 0, springConfig),\n        y2: spring(axis === 'x' ? 0 : length, springConfig)\n      }\n    }, function (values) {\n      return React.createElement(\"line\", _extends$1({\n        style: theme.axis.domain.line,\n        x1: 0,\n        y1: 0\n      }, values));\n    }), legendNode);\n  });\n};\n\nAxis.propTypes = {\n  axis: PropTypes.oneOf(['x', 'y']).isRequired,\n  scale: PropTypes.func.isRequired,\n  x: PropTypes.number.isRequired,\n  y: PropTypes.number.isRequired,\n  length: PropTypes.number.isRequired,\n  ticksPosition: PropTypes.oneOf(['before', 'after']).isRequired,\n  tickValues: axisPropTypes.tickValues,\n  tickSize: PropTypes.number.isRequired,\n  tickPadding: PropTypes.number.isRequired,\n  tickRotation: PropTypes.number.isRequired,\n  format: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  renderTick: PropTypes.func.isRequired,\n  legend: PropTypes.node,\n  legendPosition: PropTypes.oneOf(['start', 'middle', 'end']).isRequired,\n  legendOffset: PropTypes.number.isRequired,\n  onClick: PropTypes.func\n};\nAxis.defaultProps = {\n  x: 0,\n  y: 0,\n  tickSize: 5,\n  tickPadding: 5,\n  tickRotation: 0,\n  renderTick: defaultTickRenderer,\n  legendPosition: 'end',\n  legendOffset: 0\n};\nvar Axis$1 = memo(Axis);\n\nfunction _extends$2() {\n  _extends$2 = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends$2.apply(this, arguments);\n}\n\nvar positions = ['top', 'right', 'bottom', 'left'];\n\nvar Axes = function Axes(_ref) {\n  var xScale = _ref.xScale,\n      yScale = _ref.yScale,\n      width = _ref.width,\n      height = _ref.height,\n      top = _ref.top,\n      right = _ref.right,\n      bottom = _ref.bottom,\n      left = _ref.left;\n  var axes = {\n    top: top,\n    right: right,\n    bottom: bottom,\n    left: left\n  };\n  return positions.map(function (position) {\n    var axis = axes[position];\n    if (!axis) return null;\n    var isXAxis = position === 'top' || position === 'bottom';\n    var ticksPosition = position === 'top' || position === 'left' ? 'before' : 'after';\n    return React.createElement(Axis$1, _extends$2({\n      key: position\n    }, axis, {\n      axis: isXAxis ? 'x' : 'y',\n      x: position === 'right' ? width : 0,\n      y: position === 'bottom' ? height : 0,\n      scale: isXAxis ? xScale : yScale,\n      length: isXAxis ? width : height,\n      ticksPosition: ticksPosition\n    }));\n  });\n};\n\nAxes.propTypes = {\n  xScale: PropTypes.func,\n  yScale: PropTypes.func,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  top: axisPropType,\n  right: axisPropType,\n  bottom: axisPropType,\n  left: axisPropType\n};\nvar Axes$1 = memo(Axes);\n\nvar GridLine = function GridLine(props) {\n  return React.createElement(\"line\", props);\n};\n\nGridLine.propTypes = {\n  x1: PropTypes.number.isRequired,\n  x2: PropTypes.number.isRequired,\n  y1: PropTypes.number.isRequired,\n  y2: PropTypes.number.isRequired\n};\nGridLine.defaultProps = {\n  x1: 0,\n  x2: 0,\n  y1: 0,\n  y2: 0\n};\nvar GridLine$1 = memo(GridLine);\n\nfunction _extends$3() {\n  _extends$3 = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends$3.apply(this, arguments);\n}\n\nvar GridLines = function GridLines(_ref) {\n  var type = _ref.type,\n      lines = _ref.lines;\n  var theme = useTheme();\n\n  var _useMotionConfig = useMotionConfig(),\n      animate = _useMotionConfig.animate,\n      springConfig = _useMotionConfig.springConfig;\n\n  var lineWillEnter = useMemo(function () {\n    return function (_ref2) {\n      var style = _ref2.style;\n      return {\n        opacity: 0,\n        x1: type === 'x' ? 0 : style.x1.val,\n        x2: type === 'x' ? 0 : style.x2.val,\n        y1: type === 'y' ? 0 : style.y1.val,\n        y2: type === 'y' ? 0 : style.y2.val\n      };\n    };\n  }, [type]);\n  var lineWillLeave = useMemo(function () {\n    return function (_ref3) {\n      var style = _ref3.style;\n      return {\n        opacity: spring(0, springConfig),\n        x1: spring(style.x1.val, springConfig),\n        x2: spring(style.x2.val, springConfig),\n        y1: spring(style.y1.val, springConfig),\n        y2: spring(style.y2.val, springConfig)\n      };\n    };\n  }, [springConfig]);\n\n  if (!animate) {\n    return React.createElement(\"g\", null, lines.map(function (line) {\n      return React.createElement(GridLine$1, _extends$3({\n        key: line.key\n      }, line, theme.grid.line));\n    }));\n  }\n\n  return React.createElement(TransitionMotion, {\n    willEnter: lineWillEnter,\n    willLeave: lineWillLeave,\n    styles: lines.map(function (line) {\n      return {\n        key: line.key,\n        style: {\n          opacity: spring(1, springConfig),\n          x1: spring(line.x1 || 0, springConfig),\n          x2: spring(line.x2 || 0, springConfig),\n          y1: spring(line.y1 || 0, springConfig),\n          y2: spring(line.y2 || 0, springConfig)\n        }\n      };\n    })\n  }, function (interpolatedStyles) {\n    return React.createElement(\"g\", null, interpolatedStyles.map(function (interpolatedStyle) {\n      var key = interpolatedStyle.key,\n          style = interpolatedStyle.style;\n      return React.createElement(GridLine$1, _extends$3({\n        key: key\n      }, theme.grid.line, style));\n    }));\n  });\n};\n\nGridLines.propTypes = {\n  type: PropTypes.oneOf(['x', 'y']).isRequired,\n  lines: PropTypes.arrayOf(PropTypes.shape({\n    key: PropTypes.string.isRequired,\n    x1: PropTypes.number,\n    x2: PropTypes.number,\n    y1: PropTypes.number,\n    y2: PropTypes.number\n  })).isRequired\n};\nvar GridLines$1 = memo(GridLines);\n\nvar Grid = function Grid(_ref) {\n  var width = _ref.width,\n      height = _ref.height,\n      xScale = _ref.xScale,\n      yScale = _ref.yScale,\n      xValues = _ref.xValues,\n      yValues = _ref.yValues;\n  var xLines = useMemo(function () {\n    if (!xScale) return false;\n    return computeGridLines({\n      width: width,\n      height: height,\n      scale: xScale,\n      axis: 'x',\n      values: xValues\n    });\n  }, [xScale, xValues]);\n  var yLines = yScale ? computeGridLines({\n    width: width,\n    height: height,\n    scale: yScale,\n    axis: 'y',\n    values: yValues\n  }) : false;\n  return React.createElement(React.Fragment, null, xLines && React.createElement(GridLines$1, {\n    type: \"x\",\n    lines: xLines\n  }), yLines && React.createElement(GridLines$1, {\n    type: \"y\",\n    lines: yLines\n  }));\n};\n\nGrid.propTypes = {\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  xScale: PropTypes.func,\n  yScale: PropTypes.func,\n  xValues: PropTypes.oneOfType([PropTypes.number, PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.instanceOf(Date)]))]),\n  yValues: PropTypes.oneOfType([PropTypes.number, PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.instanceOf(Date)]))])\n};\nvar Grid$1 = memo(Grid);\n\nvar degreesToRadians = function degreesToRadians(degrees) {\n  return degrees * Math.PI / 180;\n};\n\nfunction _objectSpread$2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(Object(source));\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty$2(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty$2(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar renderAxisToCanvas = function renderAxisToCanvas(ctx, _ref) {\n  var axis = _ref.axis,\n      scale = _ref.scale,\n      _ref$x = _ref.x,\n      x = _ref$x === void 0 ? 0 : _ref$x,\n      _ref$y = _ref.y,\n      y = _ref$y === void 0 ? 0 : _ref$y,\n      length = _ref.length,\n      ticksPosition = _ref.ticksPosition,\n      tickValues = _ref.tickValues,\n      _ref$tickSize = _ref.tickSize,\n      tickSize = _ref$tickSize === void 0 ? 5 : _ref$tickSize,\n      _ref$tickPadding = _ref.tickPadding,\n      tickPadding = _ref$tickPadding === void 0 ? 5 : _ref$tickPadding,\n      _ref$tickRotation = _ref.tickRotation,\n      tickRotation = _ref$tickRotation === void 0 ? 0 : _ref$tickRotation,\n      format = _ref.format,\n      legend = _ref.legend,\n      _ref$legendPosition = _ref.legendPosition,\n      legendPosition = _ref$legendPosition === void 0 ? 'end' : _ref$legendPosition,\n      _ref$legendOffset = _ref.legendOffset,\n      legendOffset = _ref$legendOffset === void 0 ? 0 : _ref$legendOffset,\n      theme = _ref.theme;\n\n  var _computeCartesianTick = computeCartesianTicks({\n    axis: axis,\n    scale: scale,\n    ticksPosition: ticksPosition,\n    tickValues: tickValues,\n    tickSize: tickSize,\n    tickPadding: tickPadding,\n    tickRotation: tickRotation,\n    engine: 'canvas'\n  }),\n      ticks = _computeCartesianTick.ticks,\n      textAlign = _computeCartesianTick.textAlign,\n      textBaseline = _computeCartesianTick.textBaseline;\n\n  ctx.save();\n  ctx.translate(x, y);\n  ctx.textAlign = textAlign;\n  ctx.textBaseline = textBaseline;\n  ctx.font = \"\".concat(theme.axis.ticks.text.fontSize, \"px \").concat(theme.axis.ticks.text.fontFamily);\n\n  if (theme.axis.domain.line.strokeWidth > 0) {\n    ctx.lineWidth = theme.axis.domain.line.strokeWidth;\n    ctx.lineCap = 'square';\n    ctx.strokeStyle = theme.axis.domain.line.stroke;\n    ctx.beginPath();\n    ctx.moveTo(0, 0);\n    ctx.lineTo(axis === 'x' ? length : 0, axis === 'x' ? 0 : length);\n    ctx.stroke();\n  }\n\n  ticks.forEach(function (tick) {\n    if (theme.axis.ticks.line.strokeWidth > 0) {\n      ctx.lineWidth = theme.axis.ticks.line.strokeWidth;\n      ctx.lineCap = 'square';\n      ctx.strokeStyle = theme.axis.ticks.line.stroke;\n      ctx.beginPath();\n      ctx.moveTo(tick.x, tick.y);\n      ctx.lineTo(tick.x + tick.lineX, tick.y + tick.lineY);\n      ctx.stroke();\n    }\n\n    var value = format !== undefined ? format(tick.value) : tick.value;\n    ctx.save();\n    ctx.translate(tick.x + tick.textX, tick.y + tick.textY);\n    ctx.rotate(degreesToRadians(tickRotation));\n    ctx.fillStyle = theme.axis.ticks.text.fill;\n    ctx.fillText(value, 0, 0);\n    ctx.restore();\n  });\n\n  if (legend !== undefined) {\n    var legendX = 0;\n    var legendY = 0;\n    var legendRotation = 0;\n\n    var _textAlign;\n\n    if (axis === 'y') {\n      legendRotation = -90;\n      legendX = legendOffset;\n\n      if (legendPosition === 'start') {\n        _textAlign = 'start';\n        legendY = length;\n      } else if (legendPosition === 'middle') {\n        _textAlign = 'center';\n        legendY = length / 2;\n      } else if (legendPosition === 'end') {\n        _textAlign = 'end';\n      }\n    } else {\n      legendY = legendOffset;\n\n      if (legendPosition === 'start') {\n        _textAlign = 'start';\n      } else if (legendPosition === 'middle') {\n        _textAlign = 'center';\n        legendX = length / 2;\n      } else if (legendPosition === 'end') {\n        _textAlign = 'end';\n        legendX = length;\n      }\n    }\n\n    ctx.translate(legendX, legendY);\n    ctx.rotate(degreesToRadians(legendRotation));\n    ctx.font = \"\".concat(theme.axis.legend.text.fontWeight ? \"\".concat(theme.axis.legend.text.fontWeight, \" \") : '').concat(theme.axis.legend.text.fontSize, \"px \").concat(theme.axis.legend.text.fontFamily);\n    ctx.fillStyle = theme.axis.legend.text.fill;\n    ctx.textAlign = _textAlign;\n    ctx.textBaseline = 'middle';\n    ctx.fillText(legend, 0, 0);\n  }\n\n  ctx.restore();\n};\n\nvar positions$1 = ['top', 'right', 'bottom', 'left'];\n\nvar renderAxesToCanvas = function renderAxesToCanvas(ctx, _ref2) {\n  var xScale = _ref2.xScale,\n      yScale = _ref2.yScale,\n      width = _ref2.width,\n      height = _ref2.height,\n      top = _ref2.top,\n      right = _ref2.right,\n      bottom = _ref2.bottom,\n      left = _ref2.left,\n      theme = _ref2.theme;\n  var axes = {\n    top: top,\n    right: right,\n    bottom: bottom,\n    left: left\n  };\n  positions$1.forEach(function (position) {\n    var axis = axes[position];\n    if (!axis) return null;\n    var isXAxis = position === 'top' || position === 'bottom';\n    var ticksPosition = position === 'top' || position === 'left' ? 'before' : 'after';\n    var scale = isXAxis ? xScale : yScale;\n    var format = getFormatter(axis.format, scale);\n    renderAxisToCanvas(ctx, _objectSpread$2({}, axis, {\n      axis: isXAxis ? 'x' : 'y',\n      x: position === 'right' ? width : 0,\n      y: position === 'bottom' ? height : 0,\n      scale: scale,\n      format: format,\n      length: isXAxis ? width : height,\n      ticksPosition: ticksPosition,\n      theme: theme\n    }));\n  });\n};\n\nvar renderGridLinesToCanvas = function renderGridLinesToCanvas(ctx, _ref3) {\n  var width = _ref3.width,\n      height = _ref3.height,\n      scale = _ref3.scale,\n      axis = _ref3.axis,\n      values = _ref3.values;\n  var lines = computeGridLines({\n    width: width,\n    height: height,\n    scale: scale,\n    axis: axis,\n    values: values\n  });\n  lines.forEach(function (line) {\n    ctx.beginPath();\n    ctx.moveTo(line.x1, line.y1);\n    ctx.lineTo(line.x2, line.y2);\n    ctx.stroke();\n  });\n};\n\nexport { Axes$1 as Axes, Axis$1 as Axis, Grid$1 as Grid, axisPropType, axisPropTypes, renderAxesToCanvas, renderAxisToCanvas, renderGridLinesToCanvas };","map":{"version":3,"sources":["/Users/tianjianxu/Documents/GitHub/ReCOVER-COVID-19/frontend/node_modules/@nivo/axes/dist/nivo-axes.esm.js"],"names":["React","memo","useMemo","Fragment","PropTypes","Motion","spring","TransitionMotion","textPropsByEngine","useTheme","useMotionConfig","isNumber","timeMillisecond","utcMillisecond","timeSecond","utcSecond","timeMinute","utcMinute","timeHour","utcHour","timeDay","utcDay","timeWeek","utcWeek","timeSunday","utcSunday","timeMonday","utcMonday","timeTuesday","utcTuesday","timeWednesday","utcWednesday","timeThursday","utcThursday","timeFriday","utcFriday","timeSaturday","utcSaturday","timeMonth","utcMonth","timeYear","utcYear","timeFormat","format","_objectSpread","target","i","arguments","length","source","ownKeys","Object","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","key","_defineProperty","obj","value","defineProperty","configurable","writable","centerScale","scale","bandwidth","offset","round","Math","d","timeByType","millisecond","second","minute","hour","day","week","sunday","monday","tuesday","wednesday","thursday","friday","saturday","month","year","timeTypes","timeIntervalRegexp","RegExp","join","getScaleTicks","spec","Array","isArray","ticks","undefined","matches","match","timeType","useUTC","every","Number","Error","domain","computeCartesianTicks","_ref","axis","ticksPosition","tickValues","tickSize","tickPadding","tickRotation","_ref$engine","engine","values","textProps","position","line","lineX","lineY","text","textX","textY","translate","textAlign","align","center","textBaseline","baseline","x","y","top","bottom","right","left","map","getFormatter","format$1","type","f","Date","computeGridLines","_ref2","width","height","_values","lineValues","lineCount","lines","v","x1","x2","y1","y2","axisPropTypes","oneOf","oneOfType","number","arrayOf","string","instanceOf","func","renderTick","legend","node","legendPosition","legendOffset","axisPropType","shape","_extends","assign","prototype","hasOwnProperty","call","apply","AxisTick","_value","opacity","rotate","_onClick","onClick","textAnchor","theme","gStyle","createElement","transform","e","style","dominantBaseline","propTypes","isRequired","defaultProps","AxisTick$1","_extends$1","_objectSpread$1","_defineProperty$1","willEnter","willLeave","springConfig","_ref$style","val","defaultTickRenderer","props","Axis","_useMotionConfig","animate","formatValue","_computeCartesianTick","legendNode","legendX","legendY","legendRotation","tick","tickIndex","xy","styles","data","interpolatedStyles","_ref3","Axis$1","_extends$2","positions","Axes","xScale","yScale","axes","isXAxis","Axes$1","GridLine","GridLine$1","_extends$3","GridLines","lineWillEnter","lineWillLeave","grid","interpolatedStyle","GridLines$1","Grid","xValues","yValues","xLines","yLines","Grid$1","degreesToRadians","degrees","PI","_objectSpread$2","_defineProperty$2","renderAxisToCanvas","ctx","_ref$x","_ref$y","_ref$tickSize","_ref$tickPadding","_ref$tickRotation","_ref$legendPosition","_ref$legendOffset","save","font","fontSize","fontFamily","strokeWidth","lineWidth","lineCap","strokeStyle","stroke","beginPath","moveTo","lineTo","fillStyle","fill","fillText","restore","_textAlign","fontWeight","positions$1","renderAxesToCanvas","renderGridLinesToCanvas"],"mappings":"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","sourcesContent":["import React, { memo, useMemo, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Motion, spring, TransitionMotion } from 'react-motion';\nimport { textPropsByEngine, useTheme, useMotionConfig } from '@nivo/core';\nimport isNumber from 'lodash/isNumber';\nimport { timeMillisecond, utcMillisecond, timeSecond, utcSecond, timeMinute, utcMinute, timeHour, utcHour, timeDay, utcDay, timeWeek, utcWeek, timeSunday, utcSunday, timeMonday, utcMonday, timeTuesday, utcTuesday, timeWednesday, utcWednesday, timeThursday, utcThursday, timeFriday, utcFriday, timeSaturday, utcSaturday, timeMonth, utcMonth, timeYear, utcYear } from 'd3-time';\nimport { timeFormat } from 'd3-time-format';\nimport { format } from 'd3-format';\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(Object(source)); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nvar centerScale = function centerScale(scale) {\n  var bandwidth = scale.bandwidth();\n  if (bandwidth === 0) return scale;\n  var offset = bandwidth / 2;\n  if (scale.round()) {\n    offset = Math.round(offset);\n  }\n  return function (d) {\n    return scale(d) + offset;\n  };\n};\nvar timeByType = {\n  millisecond: [timeMillisecond, utcMillisecond],\n  second: [timeSecond, utcSecond],\n  minute: [timeMinute, utcMinute],\n  hour: [timeHour, utcHour],\n  day: [timeDay, utcDay],\n  week: [timeWeek, utcWeek],\n  sunday: [timeSunday, utcSunday],\n  monday: [timeMonday, utcMonday],\n  tuesday: [timeTuesday, utcTuesday],\n  wednesday: [timeWednesday, utcWednesday],\n  thursday: [timeThursday, utcThursday],\n  friday: [timeFriday, utcFriday],\n  saturday: [timeSaturday, utcSaturday],\n  month: [timeMonth, utcMonth],\n  year: [timeYear, utcYear]\n};\nvar timeTypes = Object.keys(timeByType);\nvar timeIntervalRegexp = new RegExp(\"^every\\\\s*(\\\\d+)?\\\\s*(\".concat(timeTypes.join('|'), \")s?$\"), 'i');\nvar getScaleTicks = function getScaleTicks(scale, spec) {\n  if (Array.isArray(spec)) {\n    return spec;\n  }\n  if (scale.ticks) {\n    if (spec === undefined) {\n      return scale.ticks();\n    }\n    if (isNumber(spec)) {\n      return scale.ticks(spec);\n    }\n    if (typeof spec === 'string') {\n      var matches = spec.match(timeIntervalRegexp);\n      if (matches) {\n        var timeType = timeByType[matches[2]][scale.useUTC ? 1 : 0];\n        if (matches[1] === undefined) {\n          return scale.ticks(timeType);\n        }\n        return scale.ticks(timeType.every(Number(matches[1])));\n      }\n      throw new Error(\"Invalid tickValues: \".concat(spec));\n    }\n  }\n  return scale.domain();\n};\nvar computeCartesianTicks = function computeCartesianTicks(_ref) {\n  var axis = _ref.axis,\n      scale = _ref.scale,\n      ticksPosition = _ref.ticksPosition,\n      tickValues = _ref.tickValues,\n      tickSize = _ref.tickSize,\n      tickPadding = _ref.tickPadding,\n      tickRotation = _ref.tickRotation,\n      _ref$engine = _ref.engine,\n      engine = _ref$engine === void 0 ? 'svg' : _ref$engine;\n  var values = getScaleTicks(scale, tickValues);\n  var textProps = textPropsByEngine[engine];\n  var position = scale.bandwidth ? centerScale(scale) : scale;\n  var line = {\n    lineX: 0,\n    lineY: 0\n  };\n  var text = {\n    textX: 0,\n    textY: 0\n  };\n  var translate;\n  var textAlign = textProps.align.center;\n  var textBaseline = textProps.baseline.center;\n  if (axis === 'x') {\n    translate = function translate(d) {\n      return {\n        x: position(d),\n        y: 0\n      };\n    };\n    line.lineY = tickSize * (ticksPosition === 'after' ? 1 : -1);\n    text.textY = (tickSize + tickPadding) * (ticksPosition === 'after' ? 1 : -1);\n    if (ticksPosition === 'after') {\n      textBaseline = textProps.baseline.top;\n    } else {\n      textBaseline = textProps.baseline.bottom;\n    }\n    if (tickRotation === 0) {\n      textAlign = textProps.align.center;\n    } else if (ticksPosition === 'after' && tickRotation < 0 || ticksPosition === 'before' && tickRotation > 0) {\n      textAlign = textProps.align.right;\n      textBaseline = textProps.baseline.center;\n    } else if (ticksPosition === 'after' && tickRotation > 0 || ticksPosition === 'before' && tickRotation < 0) {\n      textAlign = textProps.align.left;\n      textBaseline = textProps.baseline.center;\n    }\n  } else {\n    translate = function translate(d) {\n      return {\n        x: 0,\n        y: position(d)\n      };\n    };\n    line.lineX = tickSize * (ticksPosition === 'after' ? 1 : -1);\n    text.textX = (tickSize + tickPadding) * (ticksPosition === 'after' ? 1 : -1);\n    if (ticksPosition === 'after') {\n      textAlign = textProps.align.left;\n    } else {\n      textAlign = textProps.align.right;\n    }\n  }\n  var ticks = values.map(function (value) {\n    return _objectSpread({\n      key: value,\n      value: value\n    }, translate(value), line, text);\n  });\n  return {\n    ticks: ticks,\n    textAlign: textAlign,\n    textBaseline: textBaseline\n  };\n};\nvar getFormatter = function getFormatter(format$1, scale) {\n  if (!format$1 || typeof format$1 === 'function') return format$1;\n  if (scale.type === 'time') {\n    var f = timeFormat(format$1);\n    return function (d) {\n      return f(new Date(d));\n    };\n  }\n  return format(format$1);\n};\nvar computeGridLines = function computeGridLines(_ref2) {\n  var width = _ref2.width,\n      height = _ref2.height,\n      scale = _ref2.scale,\n      axis = _ref2.axis,\n      _values = _ref2.values;\n  var lineValues = Array.isArray(_values) ? _values : undefined;\n  var lineCount = isNumber(_values) ? _values : undefined;\n  var values = lineValues || getScaleTicks(scale, lineCount);\n  var position = scale.bandwidth ? centerScale(scale) : scale;\n  var lines;\n  if (axis === 'x') {\n    lines = values.map(function (v) {\n      return {\n        key: \"\".concat(v),\n        x1: position(v),\n        x2: position(v),\n        y1: 0,\n        y2: height\n      };\n    });\n  } else if (axis === 'y') {\n    lines = values.map(function (v) {\n      return {\n        key: \"\".concat(v),\n        x1: 0,\n        x2: width,\n        y1: position(v),\n        y2: position(v)\n      };\n    });\n  }\n  return lines;\n};\n\nvar axisPropTypes = {\n  ticksPosition: PropTypes.oneOf(['before', 'after']),\n  tickValues: PropTypes.oneOfType([PropTypes.number, PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.instanceOf(Date)])), PropTypes.string]),\n  tickSize: PropTypes.number,\n  tickPadding: PropTypes.number,\n  tickRotation: PropTypes.number,\n  format: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  renderTick: PropTypes.func,\n  legend: PropTypes.node,\n  legendPosition: PropTypes.oneOf(['start', 'middle', 'end']),\n  legendOffset: PropTypes.number\n};\nvar axisPropType = PropTypes.shape(axisPropTypes);\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nvar AxisTick = function AxisTick(_ref) {\n  var _value = _ref.value,\n      x = _ref.x,\n      y = _ref.y,\n      opacity = _ref.opacity,\n      rotate = _ref.rotate,\n      format = _ref.format,\n      lineX = _ref.lineX,\n      lineY = _ref.lineY,\n      _onClick = _ref.onClick,\n      textX = _ref.textX,\n      textY = _ref.textY,\n      textBaseline = _ref.textBaseline,\n      textAnchor = _ref.textAnchor;\n  var theme = useTheme();\n  var value = _value;\n  if (format !== undefined) {\n    value = format(value);\n  }\n  var gStyle = {\n    opacity: opacity\n  };\n  if (_onClick) {\n    gStyle['cursor'] = 'pointer';\n  }\n  return React.createElement(\"g\", _extends({\n    transform: \"translate(\".concat(x, \",\").concat(y, \")\")\n  }, _onClick ? {\n    onClick: function onClick(e) {\n      return _onClick(e, value);\n    }\n  } : {}, {\n    style: gStyle\n  }), React.createElement(\"line\", {\n    x1: 0,\n    x2: lineX,\n    y1: 0,\n    y2: lineY,\n    style: theme.axis.ticks.line\n  }), React.createElement(\"text\", {\n    dominantBaseline: textBaseline,\n    textAnchor: textAnchor,\n    transform: \"translate(\".concat(textX, \",\").concat(textY, \") rotate(\").concat(rotate, \")\"),\n    style: theme.axis.ticks.text\n  }, value));\n};\nAxisTick.propTypes = {\n  value: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.instanceOf(Date)]).isRequired,\n  format: PropTypes.func,\n  x: PropTypes.number.isRequired,\n  y: PropTypes.number.isRequired,\n  lineX: PropTypes.number.isRequired,\n  lineY: PropTypes.number.isRequired,\n  textX: PropTypes.number.isRequired,\n  textY: PropTypes.number.isRequired,\n  textBaseline: PropTypes.string.isRequired,\n  textAnchor: PropTypes.string.isRequired,\n  opacity: PropTypes.number.isRequired,\n  rotate: PropTypes.number.isRequired,\n  onClick: PropTypes.func\n};\nAxisTick.defaultProps = {\n  opacity: 1,\n  rotate: 0\n};\nvar AxisTick$1 = memo(AxisTick);\n\nfunction _extends$1() { _extends$1 = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$1.apply(this, arguments); }\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(Object(source)); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty$1(target, key, source[key]); }); } return target; }\nfunction _defineProperty$1(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nvar willEnter = function willEnter() {\n  return {\n    rotate: 0,\n    opacity: 0,\n    x: 0,\n    y: 0\n  };\n};\nvar willLeave = function willLeave(springConfig) {\n  return function (_ref) {\n    var _ref$style = _ref.style,\n        x = _ref$style.x,\n        y = _ref$style.y,\n        rotate = _ref$style.rotate;\n    return {\n      rotate: rotate,\n      opacity: spring(0, springConfig),\n      x: spring(x.val, springConfig),\n      y: spring(y.val, springConfig)\n    };\n  };\n};\nvar defaultTickRenderer = function defaultTickRenderer(props) {\n  return React.createElement(AxisTick$1, props);\n};\nvar Axis = function Axis(_ref2) {\n  var axis = _ref2.axis,\n      scale = _ref2.scale,\n      x = _ref2.x,\n      y = _ref2.y,\n      length = _ref2.length,\n      ticksPosition = _ref2.ticksPosition,\n      tickValues = _ref2.tickValues,\n      tickSize = _ref2.tickSize,\n      tickPadding = _ref2.tickPadding,\n      tickRotation = _ref2.tickRotation,\n      format = _ref2.format,\n      renderTick = _ref2.renderTick,\n      legend = _ref2.legend,\n      legendPosition = _ref2.legendPosition,\n      legendOffset = _ref2.legendOffset,\n      onClick = _ref2.onClick;\n  var theme = useTheme();\n  var _useMotionConfig = useMotionConfig(),\n      animate = _useMotionConfig.animate,\n      springConfig = _useMotionConfig.springConfig;\n  var formatValue = useMemo(function () {\n    return getFormatter(format, scale);\n  }, [format, scale]);\n  var _computeCartesianTick = computeCartesianTicks({\n    axis: axis,\n    scale: scale,\n    ticksPosition: ticksPosition,\n    tickValues: tickValues,\n    tickSize: tickSize,\n    tickPadding: tickPadding,\n    tickRotation: tickRotation\n  }),\n      ticks = _computeCartesianTick.ticks,\n      textAlign = _computeCartesianTick.textAlign,\n      textBaseline = _computeCartesianTick.textBaseline;\n  var legendNode = null;\n  if (legend !== undefined) {\n    var legendX = 0;\n    var legendY = 0;\n    var legendRotation = 0;\n    var textAnchor;\n    if (axis === 'y') {\n      legendRotation = -90;\n      legendX = legendOffset;\n      if (legendPosition === 'start') {\n        textAnchor = 'start';\n        legendY = length;\n      } else if (legendPosition === 'middle') {\n        textAnchor = 'middle';\n        legendY = length / 2;\n      } else if (legendPosition === 'end') {\n        textAnchor = 'end';\n      }\n    } else {\n      legendY = legendOffset;\n      if (legendPosition === 'start') {\n        textAnchor = 'start';\n      } else if (legendPosition === 'middle') {\n        textAnchor = 'middle';\n        legendX = length / 2;\n      } else if (legendPosition === 'end') {\n        textAnchor = 'end';\n        legendX = length;\n      }\n    }\n    legendNode = React.createElement(\"text\", {\n      transform: \"translate(\".concat(legendX, \", \").concat(legendY, \") rotate(\").concat(legendRotation, \")\"),\n      textAnchor: textAnchor,\n      style: _objectSpread$1({\n        dominantBaseline: 'central'\n      }, theme.axis.legend.text)\n    }, legend);\n  }\n  if (animate !== true) {\n    return React.createElement(\"g\", {\n      transform: \"translate(\".concat(x, \",\").concat(y, \")\")\n    }, ticks.map(function (tick, tickIndex) {\n      return React.createElement(renderTick, _objectSpread$1({\n        tickIndex: tickIndex,\n        format: formatValue,\n        rotate: tickRotation,\n        textBaseline: textBaseline,\n        textAnchor: textAlign\n      }, tick, onClick ? {\n        onClick: onClick\n      } : {}));\n    }), React.createElement(\"line\", {\n      style: theme.axis.domain.line,\n      x1: 0,\n      x2: axis === 'x' ? length : 0,\n      y1: 0,\n      y2: axis === 'x' ? 0 : length\n    }), legendNode);\n  }\n  return React.createElement(Motion, {\n    style: {\n      x: spring(x, springConfig),\n      y: spring(y, springConfig)\n    }\n  }, function (xy) {\n    return React.createElement(\"g\", {\n      transform: \"translate(\".concat(xy.x, \",\").concat(xy.y, \")\")\n    }, React.createElement(TransitionMotion, {\n      willEnter: willEnter,\n      willLeave: willLeave(springConfig),\n      styles: ticks.map(function (tick) {\n        return {\n          key: \"\".concat(tick.key),\n          data: tick,\n          style: {\n            opacity: spring(1, springConfig),\n            x: spring(tick.x, springConfig),\n            y: spring(tick.y, springConfig),\n            rotate: spring(tickRotation, springConfig)\n          }\n        };\n      })\n    }, function (interpolatedStyles) {\n      return React.createElement(Fragment, null, interpolatedStyles.map(function (_ref3, tickIndex) {\n        var style = _ref3.style,\n            tick = _ref3.data;\n        return React.createElement(renderTick, _objectSpread$1({\n          tickIndex: tickIndex,\n          format: formatValue,\n          textBaseline: textBaseline,\n          textAnchor: textAlign\n        }, tick, style, onClick ? {\n          onClick: onClick\n        } : {}));\n      }));\n    }), React.createElement(Motion, {\n      style: {\n        x2: spring(axis === 'x' ? length : 0, springConfig),\n        y2: spring(axis === 'x' ? 0 : length, springConfig)\n      }\n    }, function (values) {\n      return React.createElement(\"line\", _extends$1({\n        style: theme.axis.domain.line,\n        x1: 0,\n        y1: 0\n      }, values));\n    }), legendNode);\n  });\n};\nAxis.propTypes = {\n  axis: PropTypes.oneOf(['x', 'y']).isRequired,\n  scale: PropTypes.func.isRequired,\n  x: PropTypes.number.isRequired,\n  y: PropTypes.number.isRequired,\n  length: PropTypes.number.isRequired,\n  ticksPosition: PropTypes.oneOf(['before', 'after']).isRequired,\n  tickValues: axisPropTypes.tickValues,\n  tickSize: PropTypes.number.isRequired,\n  tickPadding: PropTypes.number.isRequired,\n  tickRotation: PropTypes.number.isRequired,\n  format: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  renderTick: PropTypes.func.isRequired,\n  legend: PropTypes.node,\n  legendPosition: PropTypes.oneOf(['start', 'middle', 'end']).isRequired,\n  legendOffset: PropTypes.number.isRequired,\n  onClick: PropTypes.func\n};\nAxis.defaultProps = {\n  x: 0,\n  y: 0,\n  tickSize: 5,\n  tickPadding: 5,\n  tickRotation: 0,\n  renderTick: defaultTickRenderer,\n  legendPosition: 'end',\n  legendOffset: 0\n};\nvar Axis$1 = memo(Axis);\n\nfunction _extends$2() { _extends$2 = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$2.apply(this, arguments); }\nvar positions = ['top', 'right', 'bottom', 'left'];\nvar Axes = function Axes(_ref) {\n  var xScale = _ref.xScale,\n      yScale = _ref.yScale,\n      width = _ref.width,\n      height = _ref.height,\n      top = _ref.top,\n      right = _ref.right,\n      bottom = _ref.bottom,\n      left = _ref.left;\n  var axes = {\n    top: top,\n    right: right,\n    bottom: bottom,\n    left: left\n  };\n  return positions.map(function (position) {\n    var axis = axes[position];\n    if (!axis) return null;\n    var isXAxis = position === 'top' || position === 'bottom';\n    var ticksPosition = position === 'top' || position === 'left' ? 'before' : 'after';\n    return React.createElement(Axis$1, _extends$2({\n      key: position\n    }, axis, {\n      axis: isXAxis ? 'x' : 'y',\n      x: position === 'right' ? width : 0,\n      y: position === 'bottom' ? height : 0,\n      scale: isXAxis ? xScale : yScale,\n      length: isXAxis ? width : height,\n      ticksPosition: ticksPosition\n    }));\n  });\n};\nAxes.propTypes = {\n  xScale: PropTypes.func,\n  yScale: PropTypes.func,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  top: axisPropType,\n  right: axisPropType,\n  bottom: axisPropType,\n  left: axisPropType\n};\nvar Axes$1 = memo(Axes);\n\nvar GridLine = function GridLine(props) {\n  return React.createElement(\"line\", props);\n};\nGridLine.propTypes = {\n  x1: PropTypes.number.isRequired,\n  x2: PropTypes.number.isRequired,\n  y1: PropTypes.number.isRequired,\n  y2: PropTypes.number.isRequired\n};\nGridLine.defaultProps = {\n  x1: 0,\n  x2: 0,\n  y1: 0,\n  y2: 0\n};\nvar GridLine$1 = memo(GridLine);\n\nfunction _extends$3() { _extends$3 = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$3.apply(this, arguments); }\nvar GridLines = function GridLines(_ref) {\n  var type = _ref.type,\n      lines = _ref.lines;\n  var theme = useTheme();\n  var _useMotionConfig = useMotionConfig(),\n      animate = _useMotionConfig.animate,\n      springConfig = _useMotionConfig.springConfig;\n  var lineWillEnter = useMemo(function () {\n    return function (_ref2) {\n      var style = _ref2.style;\n      return {\n        opacity: 0,\n        x1: type === 'x' ? 0 : style.x1.val,\n        x2: type === 'x' ? 0 : style.x2.val,\n        y1: type === 'y' ? 0 : style.y1.val,\n        y2: type === 'y' ? 0 : style.y2.val\n      };\n    };\n  }, [type]);\n  var lineWillLeave = useMemo(function () {\n    return function (_ref3) {\n      var style = _ref3.style;\n      return {\n        opacity: spring(0, springConfig),\n        x1: spring(style.x1.val, springConfig),\n        x2: spring(style.x2.val, springConfig),\n        y1: spring(style.y1.val, springConfig),\n        y2: spring(style.y2.val, springConfig)\n      };\n    };\n  }, [springConfig]);\n  if (!animate) {\n    return React.createElement(\"g\", null, lines.map(function (line) {\n      return React.createElement(GridLine$1, _extends$3({\n        key: line.key\n      }, line, theme.grid.line));\n    }));\n  }\n  return React.createElement(TransitionMotion, {\n    willEnter: lineWillEnter,\n    willLeave: lineWillLeave,\n    styles: lines.map(function (line) {\n      return {\n        key: line.key,\n        style: {\n          opacity: spring(1, springConfig),\n          x1: spring(line.x1 || 0, springConfig),\n          x2: spring(line.x2 || 0, springConfig),\n          y1: spring(line.y1 || 0, springConfig),\n          y2: spring(line.y2 || 0, springConfig)\n        }\n      };\n    })\n  }, function (interpolatedStyles) {\n    return React.createElement(\"g\", null, interpolatedStyles.map(function (interpolatedStyle) {\n      var key = interpolatedStyle.key,\n          style = interpolatedStyle.style;\n      return React.createElement(GridLine$1, _extends$3({\n        key: key\n      }, theme.grid.line, style));\n    }));\n  });\n};\nGridLines.propTypes = {\n  type: PropTypes.oneOf(['x', 'y']).isRequired,\n  lines: PropTypes.arrayOf(PropTypes.shape({\n    key: PropTypes.string.isRequired,\n    x1: PropTypes.number,\n    x2: PropTypes.number,\n    y1: PropTypes.number,\n    y2: PropTypes.number\n  })).isRequired\n};\nvar GridLines$1 = memo(GridLines);\n\nvar Grid = function Grid(_ref) {\n  var width = _ref.width,\n      height = _ref.height,\n      xScale = _ref.xScale,\n      yScale = _ref.yScale,\n      xValues = _ref.xValues,\n      yValues = _ref.yValues;\n  var xLines = useMemo(function () {\n    if (!xScale) return false;\n    return computeGridLines({\n      width: width,\n      height: height,\n      scale: xScale,\n      axis: 'x',\n      values: xValues\n    });\n  }, [xScale, xValues]);\n  var yLines = yScale ? computeGridLines({\n    width: width,\n    height: height,\n    scale: yScale,\n    axis: 'y',\n    values: yValues\n  }) : false;\n  return React.createElement(React.Fragment, null, xLines && React.createElement(GridLines$1, {\n    type: \"x\",\n    lines: xLines\n  }), yLines && React.createElement(GridLines$1, {\n    type: \"y\",\n    lines: yLines\n  }));\n};\nGrid.propTypes = {\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  xScale: PropTypes.func,\n  yScale: PropTypes.func,\n  xValues: PropTypes.oneOfType([PropTypes.number, PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.instanceOf(Date)]))]),\n  yValues: PropTypes.oneOfType([PropTypes.number, PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.instanceOf(Date)]))])\n};\nvar Grid$1 = memo(Grid);\n\nvar degreesToRadians = function degreesToRadians(degrees) {\n  return degrees * Math.PI / 180;\n};\n\nfunction _objectSpread$2(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(Object(source)); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty$2(target, key, source[key]); }); } return target; }\nfunction _defineProperty$2(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nvar renderAxisToCanvas = function renderAxisToCanvas(ctx, _ref) {\n  var axis = _ref.axis,\n      scale = _ref.scale,\n      _ref$x = _ref.x,\n      x = _ref$x === void 0 ? 0 : _ref$x,\n      _ref$y = _ref.y,\n      y = _ref$y === void 0 ? 0 : _ref$y,\n      length = _ref.length,\n      ticksPosition = _ref.ticksPosition,\n      tickValues = _ref.tickValues,\n      _ref$tickSize = _ref.tickSize,\n      tickSize = _ref$tickSize === void 0 ? 5 : _ref$tickSize,\n      _ref$tickPadding = _ref.tickPadding,\n      tickPadding = _ref$tickPadding === void 0 ? 5 : _ref$tickPadding,\n      _ref$tickRotation = _ref.tickRotation,\n      tickRotation = _ref$tickRotation === void 0 ? 0 : _ref$tickRotation,\n      format = _ref.format,\n      legend = _ref.legend,\n      _ref$legendPosition = _ref.legendPosition,\n      legendPosition = _ref$legendPosition === void 0 ? 'end' : _ref$legendPosition,\n      _ref$legendOffset = _ref.legendOffset,\n      legendOffset = _ref$legendOffset === void 0 ? 0 : _ref$legendOffset,\n      theme = _ref.theme;\n  var _computeCartesianTick = computeCartesianTicks({\n    axis: axis,\n    scale: scale,\n    ticksPosition: ticksPosition,\n    tickValues: tickValues,\n    tickSize: tickSize,\n    tickPadding: tickPadding,\n    tickRotation: tickRotation,\n    engine: 'canvas'\n  }),\n      ticks = _computeCartesianTick.ticks,\n      textAlign = _computeCartesianTick.textAlign,\n      textBaseline = _computeCartesianTick.textBaseline;\n  ctx.save();\n  ctx.translate(x, y);\n  ctx.textAlign = textAlign;\n  ctx.textBaseline = textBaseline;\n  ctx.font = \"\".concat(theme.axis.ticks.text.fontSize, \"px \").concat(theme.axis.ticks.text.fontFamily);\n  if (theme.axis.domain.line.strokeWidth > 0) {\n    ctx.lineWidth = theme.axis.domain.line.strokeWidth;\n    ctx.lineCap = 'square';\n    ctx.strokeStyle = theme.axis.domain.line.stroke;\n    ctx.beginPath();\n    ctx.moveTo(0, 0);\n    ctx.lineTo(axis === 'x' ? length : 0, axis === 'x' ? 0 : length);\n    ctx.stroke();\n  }\n  ticks.forEach(function (tick) {\n    if (theme.axis.ticks.line.strokeWidth > 0) {\n      ctx.lineWidth = theme.axis.ticks.line.strokeWidth;\n      ctx.lineCap = 'square';\n      ctx.strokeStyle = theme.axis.ticks.line.stroke;\n      ctx.beginPath();\n      ctx.moveTo(tick.x, tick.y);\n      ctx.lineTo(tick.x + tick.lineX, tick.y + tick.lineY);\n      ctx.stroke();\n    }\n    var value = format !== undefined ? format(tick.value) : tick.value;\n    ctx.save();\n    ctx.translate(tick.x + tick.textX, tick.y + tick.textY);\n    ctx.rotate(degreesToRadians(tickRotation));\n    ctx.fillStyle = theme.axis.ticks.text.fill;\n    ctx.fillText(value, 0, 0);\n    ctx.restore();\n  });\n  if (legend !== undefined) {\n    var legendX = 0;\n    var legendY = 0;\n    var legendRotation = 0;\n    var _textAlign;\n    if (axis === 'y') {\n      legendRotation = -90;\n      legendX = legendOffset;\n      if (legendPosition === 'start') {\n        _textAlign = 'start';\n        legendY = length;\n      } else if (legendPosition === 'middle') {\n        _textAlign = 'center';\n        legendY = length / 2;\n      } else if (legendPosition === 'end') {\n        _textAlign = 'end';\n      }\n    } else {\n      legendY = legendOffset;\n      if (legendPosition === 'start') {\n        _textAlign = 'start';\n      } else if (legendPosition === 'middle') {\n        _textAlign = 'center';\n        legendX = length / 2;\n      } else if (legendPosition === 'end') {\n        _textAlign = 'end';\n        legendX = length;\n      }\n    }\n    ctx.translate(legendX, legendY);\n    ctx.rotate(degreesToRadians(legendRotation));\n    ctx.font = \"\".concat(theme.axis.legend.text.fontWeight ? \"\".concat(theme.axis.legend.text.fontWeight, \" \") : '').concat(theme.axis.legend.text.fontSize, \"px \").concat(theme.axis.legend.text.fontFamily);\n    ctx.fillStyle = theme.axis.legend.text.fill;\n    ctx.textAlign = _textAlign;\n    ctx.textBaseline = 'middle';\n    ctx.fillText(legend, 0, 0);\n  }\n  ctx.restore();\n};\nvar positions$1 = ['top', 'right', 'bottom', 'left'];\nvar renderAxesToCanvas = function renderAxesToCanvas(ctx, _ref2) {\n  var xScale = _ref2.xScale,\n      yScale = _ref2.yScale,\n      width = _ref2.width,\n      height = _ref2.height,\n      top = _ref2.top,\n      right = _ref2.right,\n      bottom = _ref2.bottom,\n      left = _ref2.left,\n      theme = _ref2.theme;\n  var axes = {\n    top: top,\n    right: right,\n    bottom: bottom,\n    left: left\n  };\n  positions$1.forEach(function (position) {\n    var axis = axes[position];\n    if (!axis) return null;\n    var isXAxis = position === 'top' || position === 'bottom';\n    var ticksPosition = position === 'top' || position === 'left' ? 'before' : 'after';\n    var scale = isXAxis ? xScale : yScale;\n    var format = getFormatter(axis.format, scale);\n    renderAxisToCanvas(ctx, _objectSpread$2({}, axis, {\n      axis: isXAxis ? 'x' : 'y',\n      x: position === 'right' ? width : 0,\n      y: position === 'bottom' ? height : 0,\n      scale: scale,\n      format: format,\n      length: isXAxis ? width : height,\n      ticksPosition: ticksPosition,\n      theme: theme\n    }));\n  });\n};\nvar renderGridLinesToCanvas = function renderGridLinesToCanvas(ctx, _ref3) {\n  var width = _ref3.width,\n      height = _ref3.height,\n      scale = _ref3.scale,\n      axis = _ref3.axis,\n      values = _ref3.values;\n  var lines = computeGridLines({\n    width: width,\n    height: height,\n    scale: scale,\n    axis: axis,\n    values: values\n  });\n  lines.forEach(function (line) {\n    ctx.beginPath();\n    ctx.moveTo(line.x1, line.y1);\n    ctx.lineTo(line.x2, line.y2);\n    ctx.stroke();\n  });\n};\n\nexport { Axes$1 as Axes, Axis$1 as Axis, Grid$1 as Grid, axisPropType, axisPropTypes, renderAxesToCanvas, renderAxisToCanvas, renderGridLinesToCanvas };\n"]},"metadata":{},"sourceType":"module"}