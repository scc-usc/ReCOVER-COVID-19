{"ast":null,"code":"import { geoCentroid as centroid, geoProjection as projection } from \"d3-geo\";\nimport { collignonRaw } from \"../collignon.js\";\nimport { pi, sqrt } from \"../math.js\";\nimport polyhedral from \"./index.js\";\nimport octahedron from \"./octahedron.js\";\nvar kx = 2 / sqrt(3);\n\nfunction collignonK(a, b) {\n  var p = collignonRaw(a, b);\n  return [p[0] * kx, p[1]];\n}\n\ncollignonK.invert = function (x, y) {\n  return collignonRaw.invert(x / kx, y);\n};\n\nexport default function (faceProjection) {\n  faceProjection = faceProjection || function (face) {\n    var c = centroid({\n      type: \"MultiPoint\",\n      coordinates: face\n    });\n    return projection(collignonK).translate([0, 0]).scale(1).rotate(c[1] > 0 ? [-c[0], 0] : [180 - c[0], 180]);\n  };\n\n  var faces = octahedron.map(function (face) {\n    return {\n      face: face,\n      project: faceProjection(face)\n    };\n  });\n  [-1, 0, 0, 1, 0, 1, 4, 5].forEach(function (d, i) {\n    var node = faces[d];\n    node && (node.children || (node.children = [])).push(faces[i]);\n  });\n  return polyhedral(faces[0], function (lambda, phi) {\n    return faces[lambda < -pi / 2 ? phi < 0 ? 6 : 4 : lambda < 0 ? phi < 0 ? 2 : 0 : lambda < pi / 2 ? phi < 0 ? 3 : 1 : phi < 0 ? 7 : 5];\n  }).angle(-30).scale(121.906).center([0, 48.5904]);\n}","map":{"version":3,"sources":["/Users/tianjianxu/Documents/GitHub/ReCOVER-COVID-19/frontend/node_modules/d3-geo-projection/src/polyhedral/collignon.js"],"names":["geoCentroid","centroid","geoProjection","projection","collignonRaw","pi","sqrt","polyhedral","octahedron","kx","collignonK","a","b","p","invert","x","y","faceProjection","face","c","type","coordinates","translate","scale","rotate","faces","map","project","forEach","d","i","node","children","push","lambda","phi","angle","center"],"mappings":"AAAA,SAAQA,WAAW,IAAIC,QAAvB,EAAiCC,aAAa,IAAIC,UAAlD,QAAmE,QAAnE;AACA,SAAQC,YAAR,QAA2B,iBAA3B;AACA,SAAQC,EAAR,EAAYC,IAAZ,QAAuB,YAAvB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,UAAP,MAAuB,iBAAvB;AAEA,IAAIC,EAAE,GAAG,IAAIH,IAAI,CAAC,CAAD,CAAjB;;AAEA,SAASI,UAAT,CAAoBC,CAApB,EAAuBC,CAAvB,EAA0B;AACxB,MAAIC,CAAC,GAAGT,YAAY,CAACO,CAAD,EAAIC,CAAJ,CAApB;AACA,SAAO,CAACC,CAAC,CAAC,CAAD,CAAD,GAAOJ,EAAR,EAAYI,CAAC,CAAC,CAAD,CAAb,CAAP;AACD;;AAEDH,UAAU,CAACI,MAAX,GAAoB,UAASC,CAAT,EAAWC,CAAX,EAAc;AAChC,SAAOZ,YAAY,CAACU,MAAb,CAAoBC,CAAC,GAAGN,EAAxB,EAA4BO,CAA5B,CAAP;AACD,CAFD;;AAIA,eAAe,UAASC,cAAT,EAAyB;AAEtCA,EAAAA,cAAc,GAAGA,cAAc,IAAI,UAASC,IAAT,EAAe;AAChD,QAAIC,CAAC,GAAGlB,QAAQ,CAAC;AAACmB,MAAAA,IAAI,EAAE,YAAP;AAAqBC,MAAAA,WAAW,EAAEH;AAAlC,KAAD,CAAhB;AACA,WAAOf,UAAU,CAACO,UAAD,CAAV,CAAuBY,SAAvB,CAAiC,CAAC,CAAD,EAAI,CAAJ,CAAjC,EAAyCC,KAAzC,CAA+C,CAA/C,EAAkDC,MAAlD,CAAyDL,CAAC,CAAC,CAAD,CAAD,GAAO,CAAP,GAAW,CAAC,CAACA,CAAC,CAAC,CAAD,CAAH,EAAQ,CAAR,CAAX,GAAwB,CAAC,MAAMA,CAAC,CAAC,CAAD,CAAR,EAAa,GAAb,CAAjF,CAAP;AACD,GAHD;;AAKA,MAAIM,KAAK,GAAGjB,UAAU,CAACkB,GAAX,CAAe,UAASR,IAAT,EAAe;AACxC,WAAO;AAACA,MAAAA,IAAI,EAAEA,IAAP;AAAaS,MAAAA,OAAO,EAAEV,cAAc,CAACC,IAAD;AAApC,KAAP;AACD,GAFW,CAAZ;AAIA,GAAC,CAAC,CAAF,EAAK,CAAL,EAAQ,CAAR,EAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,EAA0BU,OAA1B,CAAkC,UAASC,CAAT,EAAYC,CAAZ,EAAe;AAC/C,QAAIC,IAAI,GAAGN,KAAK,CAACI,CAAD,CAAhB;AACAE,IAAAA,IAAI,IAAI,CAACA,IAAI,CAACC,QAAL,KAAkBD,IAAI,CAACC,QAAL,GAAgB,EAAlC,CAAD,EAAwCC,IAAxC,CAA6CR,KAAK,CAACK,CAAD,CAAlD,CAAR;AACD,GAHD;AAKA,SAAOvB,UAAU,CAACkB,KAAK,CAAC,CAAD,CAAN,EAAW,UAASS,MAAT,EAAiBC,GAAjB,EAAsB;AAC5C,WAAOV,KAAK,CAACS,MAAM,GAAG,CAAC7B,EAAD,GAAM,CAAf,GAAmB8B,GAAG,GAAG,CAAN,GAAU,CAAV,GAAc,CAAjC,GACPD,MAAM,GAAG,CAAT,GAAaC,GAAG,GAAG,CAAN,GAAU,CAAV,GAAc,CAA3B,GACAD,MAAM,GAAG7B,EAAE,GAAG,CAAd,GAAkB8B,GAAG,GAAG,CAAN,GAAU,CAAV,GAAc,CAAhC,GACAA,GAAG,GAAG,CAAN,GAAU,CAAV,GAAc,CAHR,CAAZ;AAID,GALY,CAAV,CAMFC,KANE,CAMI,CAAC,EANL,EAOFb,KAPE,CAOI,OAPJ,EAQFc,MARE,CAQK,CAAC,CAAD,EAAI,OAAJ,CARL,CAAP;AASD","sourcesContent":["import {geoCentroid as centroid, geoProjection as projection} from \"d3-geo\";\nimport {collignonRaw} from \"../collignon.js\";\nimport {pi, sqrt} from \"../math.js\";\nimport polyhedral from \"./index.js\";\nimport octahedron from \"./octahedron.js\";\n\nvar kx = 2 / sqrt(3);\n\nfunction collignonK(a, b) {\n  var p = collignonRaw(a, b);\n  return [p[0] * kx, p[1]];\n}\n\ncollignonK.invert = function(x,y) {\n  return collignonRaw.invert(x / kx, y);\n};\n\nexport default function(faceProjection) {\n\n  faceProjection = faceProjection || function(face) {\n    var c = centroid({type: \"MultiPoint\", coordinates: face});\n    return projection(collignonK).translate([0, 0]).scale(1).rotate(c[1] > 0 ? [-c[0], 0] : [180 - c[0], 180]);\n  };\n\n  var faces = octahedron.map(function(face) {\n    return {face: face, project: faceProjection(face)};\n  });\n\n  [-1, 0, 0, 1, 0, 1, 4, 5].forEach(function(d, i) {\n    var node = faces[d];\n    node && (node.children || (node.children = [])).push(faces[i]);\n  });\n\n  return polyhedral(faces[0], function(lambda, phi) {\n        return faces[lambda < -pi / 2 ? phi < 0 ? 6 : 4\n            : lambda < 0 ? phi < 0 ? 2 : 0\n            : lambda < pi / 2 ? phi < 0 ? 3 : 1\n            : phi < 0 ? 7 : 5];\n      })\n      .angle(-30)\n      .scale(121.906)\n      .center([0, 48.5904]);\n}\n"]},"metadata":{},"sourceType":"module"}