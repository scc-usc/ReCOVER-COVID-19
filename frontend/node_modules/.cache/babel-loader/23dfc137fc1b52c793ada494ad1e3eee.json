{"ast":null,"code":"import React, { Fragment, useMemo, useRef, useState, useCallback } from 'react';\nimport { withTheme, withDimensions, Container, SvgWrapper, ResponsiveWrapper, getRelativeCursor } from '@nivo/core';\nimport { scaleLinear } from 'd3-scale';\nimport { Delaunay } from 'd3-delaunay';\nimport compose from 'recompose/compose';\nimport defaultProps from 'recompose/defaultProps';\nimport withPropsOnChange from 'recompose/withPropsOnChange';\nimport pure from 'recompose/pure';\nimport PropTypes from 'prop-types';\nvar VoronoiPropTypes = {\n  data: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n    x: PropTypes.number.isRequired,\n    y: PropTypes.number.isRequired\n  })).isRequired,\n  xDomain: PropTypes.arrayOf(PropTypes.number).isRequired,\n  yDomain: PropTypes.arrayOf(PropTypes.number).isRequired,\n  layers: PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.oneOf(['links', 'cells', 'points', 'bounds']), PropTypes.func])).isRequired,\n  enableLinks: PropTypes.bool.isRequired,\n  linkLineWidth: PropTypes.number.isRequired,\n  linkLineColor: PropTypes.string.isRequired,\n  enableCells: PropTypes.bool.isRequired,\n  cellLineWidth: PropTypes.number.isRequired,\n  cellLineColor: PropTypes.string.isRequired,\n  enablePoints: PropTypes.bool.isRequired,\n  pointSize: PropTypes.number.isRequired,\n  pointColor: PropTypes.string.isRequired,\n  delaunay: PropTypes.object.isRequired,\n  voronoi: PropTypes.object.isRequired\n};\nvar VoronoiDefaultProps = {\n  xDomain: [0, 1],\n  yDomain: [0, 1],\n  layers: ['links', 'cells', 'points', 'bounds'],\n  enableLinks: false,\n  linkLineWidth: 1,\n  linkLineColor: '#bbb',\n  enableCells: true,\n  cellLineWidth: 2,\n  cellLineColor: '#000',\n  enablePoints: true,\n  pointSize: 4,\n  pointColor: '#666'\n};\n\nvar enhance = function enhance(Component) {\n  return compose(defaultProps(VoronoiDefaultProps), withTheme(), withDimensions(), withPropsOnChange(['xDomain', 'yDomain', 'width', 'height'], function (_ref) {\n    var xDomain = _ref.xDomain,\n        yDomain = _ref.yDomain,\n        width = _ref.width,\n        height = _ref.height;\n    return {\n      xScale: scaleLinear().domain(xDomain).range([0, width]),\n      yScale: scaleLinear().domain(yDomain).range([0, height])\n    };\n  }), withPropsOnChange(['data', 'xScale', 'yScale'], function (_ref2) {\n    var data = _ref2.data,\n        xScale = _ref2.xScale,\n        yScale = _ref2.yScale;\n    return {\n      scaledPoints: data.map(function (d) {\n        return {\n          data: d,\n          x: xScale(d.x),\n          y: yScale(d.y)\n        };\n      })\n    };\n  }), withPropsOnChange(['scaledPoints', 'width', 'height'], function (_ref3) {\n    var scaledPoints = _ref3.scaledPoints,\n        width = _ref3.width,\n        height = _ref3.height;\n    var delaunay = Delaunay.from(scaledPoints.map(function (p) {\n      return [p.x, p.y];\n    }));\n    var voronoi = delaunay.voronoi([0, 0, width, height]);\n    return {\n      delaunay: delaunay,\n      voronoi: voronoi\n    };\n  }), pure)(Component);\n};\n\nvar Voronoi = function Voronoi(_ref) {\n  var delaunay = _ref.delaunay,\n      voronoi = _ref.voronoi,\n      data = _ref.data,\n      layers = _ref.layers,\n      margin = _ref.margin,\n      width = _ref.width,\n      height = _ref.height,\n      outerWidth = _ref.outerWidth,\n      outerHeight = _ref.outerHeight,\n      enableLinks = _ref.enableLinks,\n      linkLineWidth = _ref.linkLineWidth,\n      linkLineColor = _ref.linkLineColor,\n      enableCells = _ref.enableCells,\n      cellLineWidth = _ref.cellLineWidth,\n      cellLineColor = _ref.cellLineColor,\n      enablePoints = _ref.enablePoints,\n      pointSize = _ref.pointSize,\n      pointColor = _ref.pointColor,\n      theme = _ref.theme;\n  var context = {\n    width: width,\n    height: height,\n    data: data,\n    delaunay: delaunay,\n    voronoi: voronoi\n  };\n  var layerById = {\n    bounds: React.createElement(\"path\", {\n      key: \"bounds\",\n      fill: \"none\",\n      stroke: cellLineColor,\n      strokeWidth: cellLineWidth,\n      d: voronoi.renderBounds()\n    })\n  };\n\n  if (enableLinks === true) {\n    layerById.links = React.createElement(\"path\", {\n      key: \"links\",\n      stroke: linkLineColor,\n      strokeWidth: linkLineWidth,\n      fill: \"none\",\n      d: delaunay.render()\n    });\n  }\n\n  if (enableCells === true) {\n    layerById.cells = React.createElement(\"path\", {\n      key: \"cells\",\n      d: voronoi.render(),\n      fill: \"none\",\n      stroke: cellLineColor,\n      strokeWidth: cellLineWidth\n    });\n  }\n\n  if (enablePoints === true) {\n    layerById.points = React.createElement(\"path\", {\n      key: \"points\",\n      stroke: \"none\",\n      fill: pointColor,\n      d: delaunay.renderPoints(undefined, pointSize / 2)\n    });\n  }\n\n  return React.createElement(Container, {\n    isInteractive: false,\n    theme: theme,\n    animate: false\n  }, function () {\n    return React.createElement(SvgWrapper, {\n      width: outerWidth,\n      height: outerHeight,\n      margin: margin,\n      theme: theme\n    }, layers.map(function (layer, i) {\n      if (typeof layer === 'function') {\n        return React.createElement(Fragment, {\n          key: i\n        }, layer(context));\n      }\n\n      return layerById[layer];\n    }));\n  });\n};\n\nVoronoi.propTypes = VoronoiPropTypes;\nvar Voronoi$1 = enhance(Voronoi);\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar ResponsiveVoronoi = function ResponsiveVoronoi(props) {\n  return React.createElement(ResponsiveWrapper, null, function (_ref) {\n    var width = _ref.width,\n        height = _ref.height;\n    return React.createElement(Voronoi$1, _extends({\n      width: width,\n      height: height\n    }, props));\n  });\n};\n\nvar getAccessor = function getAccessor(directive) {\n  return typeof directive === 'function' ? directive : function (d) {\n    return d[directive];\n  };\n};\n\nvar computeMeshPoints = function computeMeshPoints(_ref) {\n  var points = _ref.points,\n      _ref$x = _ref.x,\n      x = _ref$x === void 0 ? 'x' : _ref$x,\n      _ref$y = _ref.y,\n      y = _ref$y === void 0 ? 'y' : _ref$y;\n  var getX = getAccessor(x);\n  var getY = getAccessor(y);\n  return points.map(function (p) {\n    return [getX(p), getY(p)];\n  });\n};\n\nvar computeMesh = function computeMesh(_ref2) {\n  var points = _ref2.points,\n      width = _ref2.width,\n      height = _ref2.height,\n      debug = _ref2.debug;\n  var delaunay = Delaunay.from(points);\n  var voronoi = debug === true ? delaunay.voronoi([0, 0, width, height]) : undefined;\n  return {\n    delaunay: delaunay,\n    voronoi: voronoi\n  };\n};\n\nvar useVoronoiMesh = function useVoronoiMesh(_ref) {\n  var points = _ref.points,\n      x = _ref.x,\n      y = _ref.y,\n      width = _ref.width,\n      height = _ref.height,\n      debug = _ref.debug;\n  var points2d = useMemo(function () {\n    return computeMeshPoints({\n      points: points,\n      x: x,\n      y: y\n    });\n  }, [points, x, y]);\n  return useMemo(function () {\n    return computeMesh({\n      points: points2d,\n      width: width,\n      height: height,\n      debug: debug\n    });\n  }, [points2d, width, height, debug]);\n};\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nvar Mesh = function Mesh(_ref) {\n  var nodes = _ref.nodes,\n      width = _ref.width,\n      height = _ref.height,\n      x = _ref.x,\n      y = _ref.y,\n      debug = _ref.debug,\n      onMouseEnter = _ref.onMouseEnter,\n      onMouseMove = _ref.onMouseMove,\n      onMouseLeave = _ref.onMouseLeave,\n      onClick = _ref.onClick;\n  var elementRef = useRef(null);\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentIndex = _useState2[0],\n      setCurrentIndex = _useState2[1];\n\n  var _useVoronoiMesh = useVoronoiMesh({\n    points: nodes,\n    x: x,\n    y: y,\n    width: width,\n    height: height,\n    debug: debug\n  }),\n      delaunay = _useVoronoiMesh.delaunay,\n      voronoi = _useVoronoiMesh.voronoi;\n\n  var voronoiPath = useMemo(function () {\n    return debug ? voronoi.render() : undefined;\n  });\n  var getIndexAndNodeFromEvent = useCallback(function (event) {\n    var _getRelativeCursor = getRelativeCursor(elementRef.current, event),\n        _getRelativeCursor2 = _slicedToArray(_getRelativeCursor, 2),\n        x = _getRelativeCursor2[0],\n        y = _getRelativeCursor2[1];\n\n    var index = delaunay.find(x, y);\n    return [index, index !== undefined ? nodes[index] : null];\n  }, [delaunay]);\n  var handleMouseEnter = useCallback(function (event) {\n    var _getIndexAndNodeFromE = getIndexAndNodeFromEvent(event),\n        _getIndexAndNodeFromE2 = _slicedToArray(_getIndexAndNodeFromE, 2),\n        index = _getIndexAndNodeFromE2[0],\n        node = _getIndexAndNodeFromE2[1];\n\n    if (currentIndex !== index) setCurrentIndex(index);\n    node && onMouseEnter && onMouseEnter(node, event);\n  }, [getIndexAndNodeFromEvent, setCurrentIndex]);\n  var handleMouseMove = useCallback(function (event) {\n    var _getIndexAndNodeFromE3 = getIndexAndNodeFromEvent(event),\n        _getIndexAndNodeFromE4 = _slicedToArray(_getIndexAndNodeFromE3, 2),\n        index = _getIndexAndNodeFromE4[0],\n        node = _getIndexAndNodeFromE4[1];\n\n    if (currentIndex !== index) setCurrentIndex(index);\n    node && onMouseMove && onMouseMove(node, event);\n  }, [getIndexAndNodeFromEvent, setCurrentIndex]);\n  var handleMouseLeave = useCallback(function (event) {\n    setCurrentIndex(null);\n\n    if (onMouseLeave) {\n      var previousNode;\n\n      if (currentIndex !== undefined && currentIndex !== null) {\n        previousNode = nodes[currentIndex];\n      }\n\n      onMouseLeave(previousNode, event);\n    }\n  }, [setCurrentIndex]);\n  var handleClick = useCallback(function (event) {\n    var _getIndexAndNodeFromE5 = getIndexAndNodeFromEvent(event),\n        _getIndexAndNodeFromE6 = _slicedToArray(_getIndexAndNodeFromE5, 2),\n        index = _getIndexAndNodeFromE6[0],\n        node = _getIndexAndNodeFromE6[1];\n\n    if (currentIndex !== index) setCurrentIndex(index);\n    onClick && onClick(node, event);\n  }, [getIndexAndNodeFromEvent, setCurrentIndex]);\n  return React.createElement(\"g\", {\n    ref: elementRef\n  }, debug && React.createElement(\"path\", {\n    d: voronoiPath,\n    stroke: \"red\",\n    strokeWidth: 1,\n    opacity: 0.75\n  }), currentIndex !== null && debug && React.createElement(\"path\", {\n    fill: \"red\",\n    opacity: 0.35,\n    d: voronoi.renderCell(currentIndex)\n  }), React.createElement(\"rect\", {\n    width: width,\n    height: height,\n    fill: \"red\",\n    opacity: 0,\n    style: {\n      cursor: 'auto'\n    },\n    onMouseEnter: handleMouseEnter,\n    onMouseMove: handleMouseMove,\n    onMouseLeave: handleMouseLeave,\n    onClick: handleClick\n  }));\n};\n\nMesh.propTypes = {\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  nodes: PropTypes.array.isRequired,\n  x: PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.func]).isRequired,\n  y: PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.func]).isRequired,\n  onMouseEnter: PropTypes.func,\n  onMouseMove: PropTypes.func,\n  onMouseLeave: PropTypes.func,\n  onClick: PropTypes.func,\n  debug: PropTypes.bool.isRequired\n};\nMesh.defaultProps = {\n  x: 'x',\n  y: 'y',\n  debug: false\n};\n\nvar renderVoronoiToCanvas = function renderVoronoiToCanvas(ctx, voronoi) {\n  ctx.save();\n  ctx.globalAlpha = 0.75;\n  ctx.beginPath();\n  voronoi.render(ctx);\n  ctx.strokeStyle = 'red';\n  ctx.lineWidth = 1;\n  ctx.stroke();\n  ctx.restore();\n};\n\nvar renderVoronoiCellToCanvas = function renderVoronoiCellToCanvas(ctx, voronoi, index) {\n  ctx.save();\n  ctx.globalAlpha = 0.35;\n  ctx.beginPath();\n  voronoi.renderCell(index, ctx);\n  ctx.fillStyle = 'red';\n  ctx.fill();\n  ctx.restore();\n};\n\nexport { Mesh, ResponsiveVoronoi, Voronoi$1 as Voronoi, VoronoiDefaultProps, VoronoiPropTypes, computeMesh, computeMeshPoints, renderVoronoiCellToCanvas, renderVoronoiToCanvas, useVoronoiMesh };","map":{"version":3,"sources":["/Users/tianjianxu/Documents/GitHub/ReCOVER-COVID-19/frontend/node_modules/@nivo/voronoi/dist/nivo-voronoi.esm.js"],"names":["React","Fragment","useMemo","useRef","useState","useCallback","withTheme","withDimensions","Container","SvgWrapper","ResponsiveWrapper","getRelativeCursor","scaleLinear","Delaunay","compose","defaultProps","withPropsOnChange","pure","PropTypes","VoronoiPropTypes","data","arrayOf","shape","id","oneOfType","string","number","isRequired","x","y","xDomain","yDomain","layers","oneOf","func","enableLinks","bool","linkLineWidth","linkLineColor","enableCells","cellLineWidth","cellLineColor","enablePoints","pointSize","pointColor","delaunay","object","voronoi","VoronoiDefaultProps","enhance","Component","_ref","width","height","xScale","domain","range","yScale","_ref2","scaledPoints","map","d","_ref3","from","p","Voronoi","margin","outerWidth","outerHeight","theme","context","layerById","bounds","createElement","key","fill","stroke","strokeWidth","renderBounds","links","render","cells","points","renderPoints","undefined","isInteractive","animate","layer","i","propTypes","Voronoi$1","_extends","Object","assign","target","arguments","length","source","prototype","hasOwnProperty","call","apply","ResponsiveVoronoi","props","getAccessor","directive","computeMeshPoints","_ref$x","_ref$y","getX","getY","computeMesh","debug","useVoronoiMesh","points2d","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","TypeError","Symbol","iterator","toString","_arr","_n","_d","_e","_i","_s","next","done","push","value","err","Array","isArray","Mesh","nodes","onMouseEnter","onMouseMove","onMouseLeave","onClick","elementRef","_useState","_useState2","currentIndex","setCurrentIndex","_useVoronoiMesh","voronoiPath","getIndexAndNodeFromEvent","event","_getRelativeCursor","current","_getRelativeCursor2","index","find","handleMouseEnter","_getIndexAndNodeFromE","_getIndexAndNodeFromE2","node","handleMouseMove","_getIndexAndNodeFromE3","_getIndexAndNodeFromE4","handleMouseLeave","previousNode","handleClick","_getIndexAndNodeFromE5","_getIndexAndNodeFromE6","ref","opacity","renderCell","style","cursor","array","renderVoronoiToCanvas","ctx","save","globalAlpha","beginPath","strokeStyle","lineWidth","restore","renderVoronoiCellToCanvas","fillStyle"],"mappings":"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","sourcesContent":["import React, { Fragment, useMemo, useRef, useState, useCallback } from 'react';\nimport { withTheme, withDimensions, Container, SvgWrapper, ResponsiveWrapper, getRelativeCursor } from '@nivo/core';\nimport { scaleLinear } from 'd3-scale';\nimport { Delaunay } from 'd3-delaunay';\nimport compose from 'recompose/compose';\nimport defaultProps from 'recompose/defaultProps';\nimport withPropsOnChange from 'recompose/withPropsOnChange';\nimport pure from 'recompose/pure';\nimport PropTypes from 'prop-types';\n\nvar VoronoiPropTypes = {\n  data: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n    x: PropTypes.number.isRequired,\n    y: PropTypes.number.isRequired\n  })).isRequired,\n  xDomain: PropTypes.arrayOf(PropTypes.number).isRequired,\n  yDomain: PropTypes.arrayOf(PropTypes.number).isRequired,\n  layers: PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.oneOf(['links', 'cells', 'points', 'bounds']), PropTypes.func])).isRequired,\n  enableLinks: PropTypes.bool.isRequired,\n  linkLineWidth: PropTypes.number.isRequired,\n  linkLineColor: PropTypes.string.isRequired,\n  enableCells: PropTypes.bool.isRequired,\n  cellLineWidth: PropTypes.number.isRequired,\n  cellLineColor: PropTypes.string.isRequired,\n  enablePoints: PropTypes.bool.isRequired,\n  pointSize: PropTypes.number.isRequired,\n  pointColor: PropTypes.string.isRequired,\n  delaunay: PropTypes.object.isRequired,\n  voronoi: PropTypes.object.isRequired\n};\nvar VoronoiDefaultProps = {\n  xDomain: [0, 1],\n  yDomain: [0, 1],\n  layers: ['links', 'cells', 'points', 'bounds'],\n  enableLinks: false,\n  linkLineWidth: 1,\n  linkLineColor: '#bbb',\n  enableCells: true,\n  cellLineWidth: 2,\n  cellLineColor: '#000',\n  enablePoints: true,\n  pointSize: 4,\n  pointColor: '#666'\n};\n\nvar enhance = (function (Component) {\n  return compose(defaultProps(VoronoiDefaultProps), withTheme(), withDimensions(), withPropsOnChange(['xDomain', 'yDomain', 'width', 'height'], function (_ref) {\n    var xDomain = _ref.xDomain,\n        yDomain = _ref.yDomain,\n        width = _ref.width,\n        height = _ref.height;\n    return {\n      xScale: scaleLinear().domain(xDomain).range([0, width]),\n      yScale: scaleLinear().domain(yDomain).range([0, height])\n    };\n  }), withPropsOnChange(['data', 'xScale', 'yScale'], function (_ref2) {\n    var data = _ref2.data,\n        xScale = _ref2.xScale,\n        yScale = _ref2.yScale;\n    return {\n      scaledPoints: data.map(function (d) {\n        return {\n          data: d,\n          x: xScale(d.x),\n          y: yScale(d.y)\n        };\n      })\n    };\n  }), withPropsOnChange(['scaledPoints', 'width', 'height'], function (_ref3) {\n    var scaledPoints = _ref3.scaledPoints,\n        width = _ref3.width,\n        height = _ref3.height;\n    var delaunay = Delaunay.from(scaledPoints.map(function (p) {\n      return [p.x, p.y];\n    }));\n    var voronoi = delaunay.voronoi([0, 0, width, height]);\n    return {\n      delaunay: delaunay,\n      voronoi: voronoi\n    };\n  }), pure)(Component);\n});\n\nvar Voronoi = function Voronoi(_ref) {\n  var delaunay = _ref.delaunay,\n      voronoi = _ref.voronoi,\n      data = _ref.data,\n      layers = _ref.layers,\n      margin = _ref.margin,\n      width = _ref.width,\n      height = _ref.height,\n      outerWidth = _ref.outerWidth,\n      outerHeight = _ref.outerHeight,\n      enableLinks = _ref.enableLinks,\n      linkLineWidth = _ref.linkLineWidth,\n      linkLineColor = _ref.linkLineColor,\n      enableCells = _ref.enableCells,\n      cellLineWidth = _ref.cellLineWidth,\n      cellLineColor = _ref.cellLineColor,\n      enablePoints = _ref.enablePoints,\n      pointSize = _ref.pointSize,\n      pointColor = _ref.pointColor,\n      theme = _ref.theme;\n  var context = {\n    width: width,\n    height: height,\n    data: data,\n    delaunay: delaunay,\n    voronoi: voronoi\n  };\n  var layerById = {\n    bounds: React.createElement(\"path\", {\n      key: \"bounds\",\n      fill: \"none\",\n      stroke: cellLineColor,\n      strokeWidth: cellLineWidth,\n      d: voronoi.renderBounds()\n    })\n  };\n  if (enableLinks === true) {\n    layerById.links = React.createElement(\"path\", {\n      key: \"links\",\n      stroke: linkLineColor,\n      strokeWidth: linkLineWidth,\n      fill: \"none\",\n      d: delaunay.render()\n    });\n  }\n  if (enableCells === true) {\n    layerById.cells = React.createElement(\"path\", {\n      key: \"cells\",\n      d: voronoi.render(),\n      fill: \"none\",\n      stroke: cellLineColor,\n      strokeWidth: cellLineWidth\n    });\n  }\n  if (enablePoints === true) {\n    layerById.points = React.createElement(\"path\", {\n      key: \"points\",\n      stroke: \"none\",\n      fill: pointColor,\n      d: delaunay.renderPoints(undefined, pointSize / 2)\n    });\n  }\n  return React.createElement(Container, {\n    isInteractive: false,\n    theme: theme,\n    animate: false\n  }, function () {\n    return (\n      React.createElement(SvgWrapper, {\n        width: outerWidth,\n        height: outerHeight,\n        margin: margin,\n        theme: theme\n      }, layers.map(function (layer, i) {\n        if (typeof layer === 'function') {\n          return React.createElement(Fragment, {\n            key: i\n          }, layer(context));\n        }\n        return layerById[layer];\n      }))\n    );\n  });\n};\nVoronoi.propTypes = VoronoiPropTypes;\nvar Voronoi$1 = enhance(Voronoi);\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nvar ResponsiveVoronoi = function ResponsiveVoronoi(props) {\n  return React.createElement(ResponsiveWrapper, null, function (_ref) {\n    var width = _ref.width,\n        height = _ref.height;\n    return React.createElement(Voronoi$1, _extends({\n      width: width,\n      height: height\n    }, props));\n  });\n};\n\nvar getAccessor = function getAccessor(directive) {\n  return typeof directive === 'function' ? directive : function (d) {\n    return d[directive];\n  };\n};\nvar computeMeshPoints = function computeMeshPoints(_ref) {\n  var points = _ref.points,\n      _ref$x = _ref.x,\n      x = _ref$x === void 0 ? 'x' : _ref$x,\n      _ref$y = _ref.y,\n      y = _ref$y === void 0 ? 'y' : _ref$y;\n  var getX = getAccessor(x);\n  var getY = getAccessor(y);\n  return points.map(function (p) {\n    return [getX(p), getY(p)];\n  });\n};\nvar computeMesh = function computeMesh(_ref2) {\n  var points = _ref2.points,\n      width = _ref2.width,\n      height = _ref2.height,\n      debug = _ref2.debug;\n  var delaunay = Delaunay.from(points);\n  var voronoi = debug === true ? delaunay.voronoi([0, 0, width, height]) : undefined;\n  return {\n    delaunay: delaunay,\n    voronoi: voronoi\n  };\n};\n\nvar useVoronoiMesh = function useVoronoiMesh(_ref) {\n  var points = _ref.points,\n      x = _ref.x,\n      y = _ref.y,\n      width = _ref.width,\n      height = _ref.height,\n      debug = _ref.debug;\n  var points2d = useMemo(function () {\n    return computeMeshPoints({\n      points: points,\n      x: x,\n      y: y\n    });\n  }, [points, x, y]);\n  return useMemo(function () {\n    return computeMesh({\n      points: points2d,\n      width: width,\n      height: height,\n      debug: debug\n    });\n  }, [points2d, width, height, debug]);\n};\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nvar Mesh = function Mesh(_ref) {\n  var nodes = _ref.nodes,\n      width = _ref.width,\n      height = _ref.height,\n      x = _ref.x,\n      y = _ref.y,\n      debug = _ref.debug,\n      onMouseEnter = _ref.onMouseEnter,\n      onMouseMove = _ref.onMouseMove,\n      onMouseLeave = _ref.onMouseLeave,\n      onClick = _ref.onClick;\n  var elementRef = useRef(null);\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentIndex = _useState2[0],\n      setCurrentIndex = _useState2[1];\n  var _useVoronoiMesh = useVoronoiMesh({\n    points: nodes,\n    x: x,\n    y: y,\n    width: width,\n    height: height,\n    debug: debug\n  }),\n      delaunay = _useVoronoiMesh.delaunay,\n      voronoi = _useVoronoiMesh.voronoi;\n  var voronoiPath = useMemo(function () {\n    return debug ? voronoi.render() : undefined;\n  });\n  var getIndexAndNodeFromEvent = useCallback(function (event) {\n    var _getRelativeCursor = getRelativeCursor(elementRef.current, event),\n        _getRelativeCursor2 = _slicedToArray(_getRelativeCursor, 2),\n        x = _getRelativeCursor2[0],\n        y = _getRelativeCursor2[1];\n    var index = delaunay.find(x, y);\n    return [index, index !== undefined ? nodes[index] : null];\n  }, [delaunay]);\n  var handleMouseEnter = useCallback(function (event) {\n    var _getIndexAndNodeFromE = getIndexAndNodeFromEvent(event),\n        _getIndexAndNodeFromE2 = _slicedToArray(_getIndexAndNodeFromE, 2),\n        index = _getIndexAndNodeFromE2[0],\n        node = _getIndexAndNodeFromE2[1];\n    if (currentIndex !== index) setCurrentIndex(index);\n    node && onMouseEnter && onMouseEnter(node, event);\n  }, [getIndexAndNodeFromEvent, setCurrentIndex]);\n  var handleMouseMove = useCallback(function (event) {\n    var _getIndexAndNodeFromE3 = getIndexAndNodeFromEvent(event),\n        _getIndexAndNodeFromE4 = _slicedToArray(_getIndexAndNodeFromE3, 2),\n        index = _getIndexAndNodeFromE4[0],\n        node = _getIndexAndNodeFromE4[1];\n    if (currentIndex !== index) setCurrentIndex(index);\n    node && onMouseMove && onMouseMove(node, event);\n  }, [getIndexAndNodeFromEvent, setCurrentIndex]);\n  var handleMouseLeave = useCallback(function (event) {\n    setCurrentIndex(null);\n    if (onMouseLeave) {\n      var previousNode;\n      if (currentIndex !== undefined && currentIndex !== null) {\n        previousNode = nodes[currentIndex];\n      }\n      onMouseLeave(previousNode, event);\n    }\n  }, [setCurrentIndex]);\n  var handleClick = useCallback(function (event) {\n    var _getIndexAndNodeFromE5 = getIndexAndNodeFromEvent(event),\n        _getIndexAndNodeFromE6 = _slicedToArray(_getIndexAndNodeFromE5, 2),\n        index = _getIndexAndNodeFromE6[0],\n        node = _getIndexAndNodeFromE6[1];\n    if (currentIndex !== index) setCurrentIndex(index);\n    onClick && onClick(node, event);\n  }, [getIndexAndNodeFromEvent, setCurrentIndex]);\n  return React.createElement(\"g\", {\n    ref: elementRef\n  }, debug && React.createElement(\"path\", {\n    d: voronoiPath,\n    stroke: \"red\",\n    strokeWidth: 1,\n    opacity: 0.75\n  }), currentIndex !== null && debug && React.createElement(\"path\", {\n    fill: \"red\",\n    opacity: 0.35,\n    d: voronoi.renderCell(currentIndex)\n  }), React.createElement(\"rect\", {\n    width: width,\n    height: height,\n    fill: \"red\",\n    opacity: 0,\n    style: {\n      cursor: 'auto'\n    },\n    onMouseEnter: handleMouseEnter,\n    onMouseMove: handleMouseMove,\n    onMouseLeave: handleMouseLeave,\n    onClick: handleClick\n  }));\n};\nMesh.propTypes = {\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  nodes: PropTypes.array.isRequired,\n  x: PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.func]).isRequired,\n  y: PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.func]).isRequired,\n  onMouseEnter: PropTypes.func,\n  onMouseMove: PropTypes.func,\n  onMouseLeave: PropTypes.func,\n  onClick: PropTypes.func,\n  debug: PropTypes.bool.isRequired\n};\nMesh.defaultProps = {\n  x: 'x',\n  y: 'y',\n  debug: false\n};\n\nvar renderVoronoiToCanvas = function renderVoronoiToCanvas(ctx, voronoi) {\n  ctx.save();\n  ctx.globalAlpha = 0.75;\n  ctx.beginPath();\n  voronoi.render(ctx);\n  ctx.strokeStyle = 'red';\n  ctx.lineWidth = 1;\n  ctx.stroke();\n  ctx.restore();\n};\nvar renderVoronoiCellToCanvas = function renderVoronoiCellToCanvas(ctx, voronoi, index) {\n  ctx.save();\n  ctx.globalAlpha = 0.35;\n  ctx.beginPath();\n  voronoi.renderCell(index, ctx);\n  ctx.fillStyle = 'red';\n  ctx.fill();\n  ctx.restore();\n};\n\nexport { Mesh, ResponsiveVoronoi, Voronoi$1 as Voronoi, VoronoiDefaultProps, VoronoiPropTypes, computeMesh, computeMeshPoints, renderVoronoiCellToCanvas, renderVoronoiToCanvas, useVoronoiMesh };\n"]},"metadata":{},"sourceType":"module"}