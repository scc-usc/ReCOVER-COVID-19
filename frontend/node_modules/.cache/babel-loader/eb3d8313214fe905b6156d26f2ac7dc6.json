{"ast":null,"code":"function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nimport * as React from 'react';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport useMemo from \"rc-util/es/hooks/useMemo\";\nimport classNames from 'classnames';\nimport List from 'rc-virtual-list';\nimport TransBtn from './TransBtn';\n/**\n * Using virtual list of option display.\n * Will fallback to dom if use customize render.\n */\n\nvar OptionList = function OptionList(_ref, ref) {\n  var prefixCls = _ref.prefixCls,\n      id = _ref.id,\n      flattenOptions = _ref.flattenOptions,\n      childrenAsData = _ref.childrenAsData,\n      values = _ref.values,\n      searchValue = _ref.searchValue,\n      multiple = _ref.multiple,\n      defaultActiveFirstOption = _ref.defaultActiveFirstOption,\n      height = _ref.height,\n      itemHeight = _ref.itemHeight,\n      notFoundContent = _ref.notFoundContent,\n      open = _ref.open,\n      menuItemSelectedIcon = _ref.menuItemSelectedIcon,\n      virtual = _ref.virtual,\n      onSelect = _ref.onSelect,\n      onToggleOpen = _ref.onToggleOpen,\n      onActiveValue = _ref.onActiveValue,\n      onScroll = _ref.onScroll;\n  var itemPrefixCls = \"\".concat(prefixCls, \"-item\");\n  var memoFlattenOptions = useMemo(function () {\n    return flattenOptions;\n  }, [open, flattenOptions], function (prev, next) {\n    return next[0] && prev[1] !== next[1];\n  }); // =========================== List ===========================\n\n  var listRef = React.useRef(null);\n\n  var onListMouseDown = function onListMouseDown(event) {\n    event.preventDefault();\n  };\n\n  var scrollIntoView = function scrollIntoView(index) {\n    if (listRef.current) {\n      listRef.current.scrollTo({\n        index: index\n      });\n    }\n  }; // ========================== Active ==========================\n\n\n  var getEnabledActiveIndex = function getEnabledActiveIndex(index) {\n    var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    var len = memoFlattenOptions.length;\n\n    for (var i = 0; i < len; i += 1) {\n      var current = (index + i * offset + len) % len;\n      var _memoFlattenOptions$c = memoFlattenOptions[current],\n          group = _memoFlattenOptions$c.group,\n          data = _memoFlattenOptions$c.data;\n\n      if (!group && !data.disabled) {\n        return current;\n      }\n    }\n\n    return -1;\n  };\n\n  var _React$useState = React.useState(function () {\n    return getEnabledActiveIndex(0);\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      activeIndex = _React$useState2[0],\n      setActiveIndex = _React$useState2[1];\n\n  var setActive = function setActive(index) {\n    setActiveIndex(index); // Trigger active event\n\n    var flattenItem = memoFlattenOptions[index];\n\n    if (!flattenItem) {\n      onActiveValue(null, -1);\n      return;\n    }\n\n    onActiveValue(flattenItem.data.value, index);\n  }; // Auto active first item when list length or searchValue changed\n\n\n  React.useEffect(function () {\n    setActive(defaultActiveFirstOption !== false ? getEnabledActiveIndex(0) : -1);\n  }, [memoFlattenOptions.length, searchValue]); // Auto scroll to item position in single mode\n\n  React.useEffect(function () {\n    /**\n     * React will skip `onChange` when component update.\n     * `setActive` function will call root accessibility state update which makes re-render.\n     * So we need to delay to let Input component trigger onChange first.\n     */\n    var timeoutId = setTimeout(function () {\n      if (!multiple && open && values.size === 1) {\n        var value = Array.from(values)[0];\n        var index = memoFlattenOptions.findIndex(function (_ref2) {\n          var data = _ref2.data;\n          return data.value === value;\n        });\n        setActive(index);\n        scrollIntoView(index);\n      }\n    });\n    return function () {\n      return clearTimeout(timeoutId);\n    };\n  }, [open]); // ========================== Values ==========================\n\n  var onSelectValue = function onSelectValue(value) {\n    if (value !== undefined) {\n      onSelect(value, {\n        selected: !values.has(value)\n      });\n    } // Single mode should always close by select\n\n\n    if (!multiple) {\n      onToggleOpen(false);\n    }\n  }; // ========================= Keyboard =========================\n\n\n  React.useImperativeHandle(ref, function () {\n    return {\n      onKeyDown: function onKeyDown(event) {\n        var which = event.which;\n\n        switch (which) {\n          // >>> Arrow keys\n          case KeyCode.UP:\n          case KeyCode.DOWN:\n            {\n              var offset = 0;\n\n              if (which === KeyCode.UP) {\n                offset = -1;\n              } else if (which === KeyCode.DOWN) {\n                offset = 1;\n              }\n\n              if (offset !== 0) {\n                var nextActiveIndex = getEnabledActiveIndex(activeIndex + offset, offset);\n                scrollIntoView(nextActiveIndex);\n                setActive(nextActiveIndex);\n              }\n\n              break;\n            }\n          // >>> Select\n\n          case KeyCode.ENTER:\n            {\n              // value\n              var item = memoFlattenOptions[activeIndex];\n\n              if (item && !item.data.disabled) {\n                onSelectValue(item.data.value);\n              } else {\n                onSelectValue(undefined);\n              }\n\n              if (open) {\n                event.preventDefault();\n              }\n\n              break;\n            }\n          // >>> Close\n\n          case KeyCode.ESC:\n            {\n              onToggleOpen(false);\n            }\n        }\n      },\n      onKeyUp: function onKeyUp() {},\n      scrollTo: function scrollTo(index) {\n        scrollIntoView(index);\n      }\n    };\n  }); // ========================== Render ==========================\n\n  if (memoFlattenOptions.length === 0) {\n    return React.createElement(\"div\", {\n      role: \"listbox\",\n      id: \"\".concat(id, \"_list\"),\n      className: \"\".concat(itemPrefixCls, \"-empty\"),\n      onMouseDown: onListMouseDown\n    }, notFoundContent);\n  }\n\n  function renderItem(index) {\n    var item = memoFlattenOptions[index];\n    var value = item && item.data.value;\n    return item ? React.createElement(\"div\", {\n      key: index,\n      role: \"option\",\n      id: \"\".concat(id, \"_list_\").concat(index),\n      \"aria-selected\": values.has(value)\n    }, value) : null;\n  }\n\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    role: \"listbox\",\n    id: \"\".concat(id, \"_list\"),\n    style: {\n      height: 0,\n      overflow: 'hidden'\n    }\n  }, renderItem(activeIndex - 1), renderItem(activeIndex), renderItem(activeIndex + 1)), React.createElement(List, {\n    itemKey: \"key\",\n    ref: listRef,\n    data: memoFlattenOptions,\n    height: height,\n    itemHeight: itemHeight,\n    fullHeight: false,\n    onMouseDown: onListMouseDown,\n    onScroll: onScroll,\n    virtual: virtual\n  }, function (_ref3, itemIndex) {\n    var _classNames;\n\n    var group = _ref3.group,\n        groupOption = _ref3.groupOption,\n        data = _ref3.data;\n    var label = data.label,\n        key = data.key; // Group\n\n    if (group) {\n      return React.createElement(\"div\", {\n        className: classNames(itemPrefixCls, \"\".concat(itemPrefixCls, \"-group\"))\n      }, label !== undefined ? label : key);\n    }\n\n    var disabled = data.disabled,\n        value = data.value,\n        title = data.title,\n        children = data.children,\n        style = data.style,\n        className = data.className,\n        otherProps = _objectWithoutProperties(data, [\"disabled\", \"value\", \"title\", \"children\", \"style\", \"className\"]); // Option\n\n\n    var selected = values.has(value);\n    var optionPrefixCls = \"\".concat(itemPrefixCls, \"-option\");\n    var optionClassName = classNames(itemPrefixCls, optionPrefixCls, className, (_classNames = {}, _defineProperty(_classNames, \"\".concat(optionPrefixCls, \"-grouped\"), groupOption), _defineProperty(_classNames, \"\".concat(optionPrefixCls, \"-active\"), activeIndex === itemIndex && !disabled), _defineProperty(_classNames, \"\".concat(optionPrefixCls, \"-disabled\"), disabled), _defineProperty(_classNames, \"\".concat(optionPrefixCls, \"-selected\"), selected), _classNames));\n    var mergedLabel = childrenAsData ? children : label;\n    var iconVisible = !menuItemSelectedIcon || typeof menuItemSelectedIcon === 'function' || selected;\n    return React.createElement(\"div\", Object.assign({}, otherProps, {\n      \"aria-selected\": selected,\n      className: optionClassName,\n      title: title,\n      onMouseMove: function onMouseMove() {\n        if (activeIndex === itemIndex || disabled) {\n          return;\n        }\n\n        setActive(itemIndex);\n      },\n      onClick: function onClick() {\n        if (!disabled) {\n          onSelectValue(value);\n        }\n      },\n      style: style\n    }), React.createElement(\"div\", {\n      className: \"\".concat(optionPrefixCls, \"-content\")\n    }, mergedLabel || value), React.isValidElement(menuItemSelectedIcon) || selected, iconVisible && React.createElement(TransBtn, {\n      className: \"\".concat(itemPrefixCls, \"-option-state\"),\n      customizeIcon: menuItemSelectedIcon,\n      customizeIconProps: {\n        isSelected: selected\n      }\n    }, selected ? '✓' : null));\n  }));\n};\n\nvar RefOptionList = React.forwardRef(OptionList);\nRefOptionList.displayName = 'OptionList';\nexport default RefOptionList;","map":{"version":3,"sources":["/Users/tianjianxu/Documents/GitHub/ReCOVER-COVID-19/frontend/node_modules/rc-select/es/OptionList.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","_objectWithoutProperties","source","excluded","target","_objectWithoutPropertiesLoose","i","getOwnPropertySymbols","sourceSymbolKeys","length","indexOf","prototype","propertyIsEnumerable","call","sourceKeys","keys","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","toString","slice","constructor","name","Array","from","test","len","arr2","Symbol","iterator","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","err","isArray","React","KeyCode","useMemo","classNames","List","TransBtn","OptionList","_ref","ref","prefixCls","id","flattenOptions","childrenAsData","values","searchValue","multiple","defaultActiveFirstOption","height","itemHeight","notFoundContent","open","menuItemSelectedIcon","virtual","onSelect","onToggleOpen","onActiveValue","onScroll","itemPrefixCls","concat","memoFlattenOptions","prev","listRef","useRef","onListMouseDown","event","preventDefault","scrollIntoView","index","current","scrollTo","getEnabledActiveIndex","offset","arguments","_memoFlattenOptions$c","group","data","disabled","_React$useState","useState","_React$useState2","activeIndex","setActiveIndex","setActive","flattenItem","useEffect","timeoutId","setTimeout","size","findIndex","_ref2","clearTimeout","onSelectValue","selected","has","useImperativeHandle","onKeyDown","which","UP","DOWN","nextActiveIndex","ENTER","item","ESC","onKeyUp","createElement","role","className","onMouseDown","renderItem","Fragment","style","overflow","itemKey","fullHeight","_ref3","itemIndex","_classNames","groupOption","label","title","children","otherProps","optionPrefixCls","optionClassName","mergedLabel","iconVisible","assign","onMouseMove","onClick","isValidElement","customizeIcon","customizeIconProps","isSelected","RefOptionList","forwardRef","displayName"],"mappings":"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","sourcesContent":["function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(n); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport * as React from 'react';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport useMemo from \"rc-util/es/hooks/useMemo\";\nimport classNames from 'classnames';\nimport List from 'rc-virtual-list';\nimport TransBtn from './TransBtn';\n/**\n * Using virtual list of option display.\n * Will fallback to dom if use customize render.\n */\n\nvar OptionList = function OptionList(_ref, ref) {\n  var prefixCls = _ref.prefixCls,\n      id = _ref.id,\n      flattenOptions = _ref.flattenOptions,\n      childrenAsData = _ref.childrenAsData,\n      values = _ref.values,\n      searchValue = _ref.searchValue,\n      multiple = _ref.multiple,\n      defaultActiveFirstOption = _ref.defaultActiveFirstOption,\n      height = _ref.height,\n      itemHeight = _ref.itemHeight,\n      notFoundContent = _ref.notFoundContent,\n      open = _ref.open,\n      menuItemSelectedIcon = _ref.menuItemSelectedIcon,\n      virtual = _ref.virtual,\n      onSelect = _ref.onSelect,\n      onToggleOpen = _ref.onToggleOpen,\n      onActiveValue = _ref.onActiveValue,\n      onScroll = _ref.onScroll;\n  var itemPrefixCls = \"\".concat(prefixCls, \"-item\");\n  var memoFlattenOptions = useMemo(function () {\n    return flattenOptions;\n  }, [open, flattenOptions], function (prev, next) {\n    return next[0] && prev[1] !== next[1];\n  }); // =========================== List ===========================\n\n  var listRef = React.useRef(null);\n\n  var onListMouseDown = function onListMouseDown(event) {\n    event.preventDefault();\n  };\n\n  var scrollIntoView = function scrollIntoView(index) {\n    if (listRef.current) {\n      listRef.current.scrollTo({\n        index: index\n      });\n    }\n  }; // ========================== Active ==========================\n\n\n  var getEnabledActiveIndex = function getEnabledActiveIndex(index) {\n    var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    var len = memoFlattenOptions.length;\n\n    for (var i = 0; i < len; i += 1) {\n      var current = (index + i * offset + len) % len;\n      var _memoFlattenOptions$c = memoFlattenOptions[current],\n          group = _memoFlattenOptions$c.group,\n          data = _memoFlattenOptions$c.data;\n\n      if (!group && !data.disabled) {\n        return current;\n      }\n    }\n\n    return -1;\n  };\n\n  var _React$useState = React.useState(function () {\n    return getEnabledActiveIndex(0);\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      activeIndex = _React$useState2[0],\n      setActiveIndex = _React$useState2[1];\n\n  var setActive = function setActive(index) {\n    setActiveIndex(index); // Trigger active event\n\n    var flattenItem = memoFlattenOptions[index];\n\n    if (!flattenItem) {\n      onActiveValue(null, -1);\n      return;\n    }\n\n    onActiveValue(flattenItem.data.value, index);\n  }; // Auto active first item when list length or searchValue changed\n\n\n  React.useEffect(function () {\n    setActive(defaultActiveFirstOption !== false ? getEnabledActiveIndex(0) : -1);\n  }, [memoFlattenOptions.length, searchValue]); // Auto scroll to item position in single mode\n\n  React.useEffect(function () {\n    /**\n     * React will skip `onChange` when component update.\n     * `setActive` function will call root accessibility state update which makes re-render.\n     * So we need to delay to let Input component trigger onChange first.\n     */\n    var timeoutId = setTimeout(function () {\n      if (!multiple && open && values.size === 1) {\n        var value = Array.from(values)[0];\n        var index = memoFlattenOptions.findIndex(function (_ref2) {\n          var data = _ref2.data;\n          return data.value === value;\n        });\n        setActive(index);\n        scrollIntoView(index);\n      }\n    });\n    return function () {\n      return clearTimeout(timeoutId);\n    };\n  }, [open]); // ========================== Values ==========================\n\n  var onSelectValue = function onSelectValue(value) {\n    if (value !== undefined) {\n      onSelect(value, {\n        selected: !values.has(value)\n      });\n    } // Single mode should always close by select\n\n\n    if (!multiple) {\n      onToggleOpen(false);\n    }\n  }; // ========================= Keyboard =========================\n\n\n  React.useImperativeHandle(ref, function () {\n    return {\n      onKeyDown: function onKeyDown(event) {\n        var which = event.which;\n\n        switch (which) {\n          // >>> Arrow keys\n          case KeyCode.UP:\n          case KeyCode.DOWN:\n            {\n              var offset = 0;\n\n              if (which === KeyCode.UP) {\n                offset = -1;\n              } else if (which === KeyCode.DOWN) {\n                offset = 1;\n              }\n\n              if (offset !== 0) {\n                var nextActiveIndex = getEnabledActiveIndex(activeIndex + offset, offset);\n                scrollIntoView(nextActiveIndex);\n                setActive(nextActiveIndex);\n              }\n\n              break;\n            }\n          // >>> Select\n\n          case KeyCode.ENTER:\n            {\n              // value\n              var item = memoFlattenOptions[activeIndex];\n\n              if (item && !item.data.disabled) {\n                onSelectValue(item.data.value);\n              } else {\n                onSelectValue(undefined);\n              }\n\n              if (open) {\n                event.preventDefault();\n              }\n\n              break;\n            }\n          // >>> Close\n\n          case KeyCode.ESC:\n            {\n              onToggleOpen(false);\n            }\n        }\n      },\n      onKeyUp: function onKeyUp() {},\n      scrollTo: function scrollTo(index) {\n        scrollIntoView(index);\n      }\n    };\n  }); // ========================== Render ==========================\n\n  if (memoFlattenOptions.length === 0) {\n    return React.createElement(\"div\", {\n      role: \"listbox\",\n      id: \"\".concat(id, \"_list\"),\n      className: \"\".concat(itemPrefixCls, \"-empty\"),\n      onMouseDown: onListMouseDown\n    }, notFoundContent);\n  }\n\n  function renderItem(index) {\n    var item = memoFlattenOptions[index];\n    var value = item && item.data.value;\n    return item ? React.createElement(\"div\", {\n      key: index,\n      role: \"option\",\n      id: \"\".concat(id, \"_list_\").concat(index),\n      \"aria-selected\": values.has(value)\n    }, value) : null;\n  }\n\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    role: \"listbox\",\n    id: \"\".concat(id, \"_list\"),\n    style: {\n      height: 0,\n      overflow: 'hidden'\n    }\n  }, renderItem(activeIndex - 1), renderItem(activeIndex), renderItem(activeIndex + 1)), React.createElement(List, {\n    itemKey: \"key\",\n    ref: listRef,\n    data: memoFlattenOptions,\n    height: height,\n    itemHeight: itemHeight,\n    fullHeight: false,\n    onMouseDown: onListMouseDown,\n    onScroll: onScroll,\n    virtual: virtual\n  }, function (_ref3, itemIndex) {\n    var _classNames;\n\n    var group = _ref3.group,\n        groupOption = _ref3.groupOption,\n        data = _ref3.data;\n    var label = data.label,\n        key = data.key; // Group\n\n    if (group) {\n      return React.createElement(\"div\", {\n        className: classNames(itemPrefixCls, \"\".concat(itemPrefixCls, \"-group\"))\n      }, label !== undefined ? label : key);\n    }\n\n    var disabled = data.disabled,\n        value = data.value,\n        title = data.title,\n        children = data.children,\n        style = data.style,\n        className = data.className,\n        otherProps = _objectWithoutProperties(data, [\"disabled\", \"value\", \"title\", \"children\", \"style\", \"className\"]); // Option\n\n\n    var selected = values.has(value);\n    var optionPrefixCls = \"\".concat(itemPrefixCls, \"-option\");\n    var optionClassName = classNames(itemPrefixCls, optionPrefixCls, className, (_classNames = {}, _defineProperty(_classNames, \"\".concat(optionPrefixCls, \"-grouped\"), groupOption), _defineProperty(_classNames, \"\".concat(optionPrefixCls, \"-active\"), activeIndex === itemIndex && !disabled), _defineProperty(_classNames, \"\".concat(optionPrefixCls, \"-disabled\"), disabled), _defineProperty(_classNames, \"\".concat(optionPrefixCls, \"-selected\"), selected), _classNames));\n    var mergedLabel = childrenAsData ? children : label;\n    var iconVisible = !menuItemSelectedIcon || typeof menuItemSelectedIcon === 'function' || selected;\n    return React.createElement(\"div\", Object.assign({}, otherProps, {\n      \"aria-selected\": selected,\n      className: optionClassName,\n      title: title,\n      onMouseMove: function onMouseMove() {\n        if (activeIndex === itemIndex || disabled) {\n          return;\n        }\n\n        setActive(itemIndex);\n      },\n      onClick: function onClick() {\n        if (!disabled) {\n          onSelectValue(value);\n        }\n      },\n      style: style\n    }), React.createElement(\"div\", {\n      className: \"\".concat(optionPrefixCls, \"-content\")\n    }, mergedLabel || value), React.isValidElement(menuItemSelectedIcon) || selected, iconVisible && React.createElement(TransBtn, {\n      className: \"\".concat(itemPrefixCls, \"-option-state\"),\n      customizeIcon: menuItemSelectedIcon,\n      customizeIconProps: {\n        isSelected: selected\n      }\n    }, selected ? '✓' : null));\n  }));\n};\n\nvar RefOptionList = React.forwardRef(OptionList);\nRefOptionList.displayName = 'OptionList';\nexport default RefOptionList;"]},"metadata":{},"sourceType":"module"}